// Azure Storage JavaScript Client Library 0.2.8-preview.14 
// Copyright (c) Microsoft and contributors. All rights reserved. 
require=function t(a,e,i){function n(p,l){if(!e[p]){if(!a[p]){var r="function"==typeof require&&require;if(!l&&r)return r(p,!0);if(o)return o(p,!0);var s=new Error("Cannot find module '"+p+"'");throw s.code="MODULE_NOT_FOUND",s}var c=e[p]={exports:{}};a[p][0].call(c.exports,function(t){var e=a[p][1][t];return n(e||t)},c,c.exports,t,a,e,i)}return e[p].exports}for(var o="function"==typeof require&&require,p=0;p<i.length;p++)n(i[p]);return n}({1:[function(t,a,e){var i=window.AzureStorage||{};i.generateDevelopmentStorageCredentials=function(t){var a="UseDevelopmentStorage=true;";return t&&(a+="DevelopmentStorageProxyUri="+t),a};var n=t("../lib/services/blob/blobservice.browser");i.BlobService=n,i.BlobUtilities=t("../lib/services/blob/blobutilities"),i.createBlobService=function(t,a,e){return new n(t,a,e,null)},i.createBlobServiceWithSas=function(t,a){return new n(null,null,t,a)},i.createBlobServiceAnonymous=function(t){return new n(null,null,t,null)};var o=t("../lib/common/common.browser"),p=o.StorageServiceClient,l=o.SharedKey;i.generateAccountSharedAccessSignature=function(t,a,e){var i=p.getStorageSettings(t,a);return new l(i._name,i._key).generateAccountSignedQueryString(e)},i.Constants=o.Constants,i.StorageUtilities=o.StorageUtilities,i.AccessCondition=o.AccessCondition,i.SR=o.SR,i.StorageServiceClient=p,i.Logger=o.Logger,i.WebResource=o.WebResource,i.Validate=o.validate,i.date=o.date,i.LinearRetryPolicyFilter=o.LinearRetryPolicyFilter,i.ExponentialRetryPolicyFilter=o.ExponentialRetryPolicyFilter,i.RetryPolicyFilter=o.RetryPolicyFilter,window.AzureStorage=i},{"../lib/common/common.browser":5,"../lib/services/blob/blobservice.browser":41,"../lib/services/blob/blobutilities":43}],41:[function(t,a,e){var i=t("./blobservice.core"),n=t("./../../common/common.browser"),o=t("extend"),p=t("browserify-mime"),l=n.Constants,r=n.util,s=l.BlobConstants,c=n.BrowserFileReadStream,d=n.SpeedSummary,m=n.validate;i.prototype.createBlockBlobFromBrowserFile=function(t,a,e,i,n){return this._createBlobFromBrowserFile(t,a,s.BlobTypes.BLOCK,e,i,n)},i.prototype.createPageBlobFromBrowserFile=function(t,a,e,i,n){return this._createBlobFromBrowserFile(t,a,s.BlobTypes.PAGE,e,i,n)},i.prototype.createAppendBlobFromBrowserFile=function(t,a,e,i,n){return this._createBlobFromBrowserFile(t,a,s.BlobTypes.APPEND,e,i,n)},i.prototype.appendFromBrowserFile=function(t,a,e,i,n){var p;r.normalizeArgs(i,n,function(t,a){p=t,n=a}),m.validateArgs("appendFromBrowserFile",function(i){i.string(t,"container"),i.string(a,"blob"),i.containerNameIsValid(t),i.browserFileIsValid(e),i.callback(n)});var l=o(!0,{},p);l.speedSummary=l.speedSummary||new d(a);var u=new c(e);return this._uploadBlobFromStream(!1,t,a,s.BlobTypes.APPEND,u,e.size,l,function(t,a,e){r.objectIsFunction(u.destroy)&&u.destroy(),n(t,a,e)}),l.speedSummary},i.prototype._createBlobFromBrowserFile=function(t,a,e,i,n,l){var s;r.normalizeArgs(n,l,function(t,a){s=t,l=a}),m.validateArgs("_createBlobFromBrowserFile",function(n){n.string(t,"container"),n.string(a,"blob"),n.containerNameIsValid(t),n.blobTypeIsValid(e),n.browserFileIsValid(i),n.callback(l)});var u=o(!0,{},s);u.speedSummary=u.speedSummary||new d(a);var v=this;return this._createBlob(t,a,e,i.size,u,function(n,o,s){if(n)l(n,o,s);else{void 0===r.tryGetValueChain(u,["contentSettings","contentType"],void 0)&&r.setObjectInnerPropertyValue(u,["contentSettings","contentType"],p.lookup(i.name));var d=new c(i);v._uploadBlobFromStream(!0,t,a,e,d,i.size,u,function(t,a,e){r.objectIsFunction(d.destroy)&&d.destroy(),l(t,a,e)})}}),u.speedSummary},a.exports=i},{"./../../common/common.browser":5,"./blobservice.core":42,"browserify-mime":111,extend:158}],111:[function(t,a,e){"use strict";var i=a.exports={lookup:function(t,a){var e=t.replace(/.*[\.\/]/,"").toLowerCase();return this.types[e]||a||this.default_type},default_type:"application/octet-stream",types:{123:"application/vnd.lotus-1-2-3",ez:"application/andrew-inset",aw:"application/applixware",atom:"application/atom+xml",atomcat:"application/atomcat+xml",atomsvc:"application/atomsvc+xml",ccxml:"application/ccxml+xml",cdmia:"application/cdmi-capability",cdmic:"application/cdmi-container",cdmid:"application/cdmi-domain",cdmio:"application/cdmi-object",cdmiq:"application/cdmi-queue",cu:"application/cu-seeme",davmount:"application/davmount+xml",dbk:"application/docbook+xml",dssc:"application/dssc+der",xdssc:"application/dssc+xml",ecma:"application/ecmascript",emma:"application/emma+xml",epub:"application/epub+zip",exi:"application/exi",pfr:"application/font-tdpfr",gml:"application/gml+xml",gpx:"application/gpx+xml",gxf:"application/gxf",stk:"application/hyperstudio",ink:"application/inkml+xml",inkml:"application/inkml+xml",ipfix:"application/ipfix",jar:"application/java-archive",ser:"application/java-serialized-object",class:"application/java-vm",js:"application/javascript",json:"application/json",jsonml:"application/jsonml+json",lostxml:"application/lost+xml",hqx:"application/mac-binhex40",cpt:"application/mac-compactpro",mads:"application/mads+xml",mrc:"application/marc",mrcx:"application/marcxml+xml",ma:"application/mathematica",nb:"application/mathematica",mb:"application/mathematica",mathml:"application/mathml+xml",mbox:"application/mbox",mscml:"application/mediaservercontrol+xml",metalink:"application/metalink+xml",meta4:"application/metalink4+xml",mets:"application/mets+xml",mods:"application/mods+xml",m21:"application/mp21",mp21:"application/mp21",mp4s:"application/mp4",doc:"application/msword",dot:"application/msword",mxf:"application/mxf",bin:"application/octet-stream",dms:"application/octet-stream",lrf:"application/octet-stream",mar:"application/octet-stream",so:"application/octet-stream",dist:"application/octet-stream",distz:"application/octet-stream",pkg:"application/octet-stream",bpk:"application/octet-stream",dump:"application/octet-stream",elc:"application/octet-stream",deploy:"application/octet-stream",oda:"application/oda",opf:"application/oebps-package+xml",ogx:"application/ogg",omdoc:"application/omdoc+xml",onetoc:"application/onenote",onetoc2:"application/onenote",onetmp:"application/onenote",onepkg:"application/onenote",oxps:"application/oxps",xer:"application/patch-ops-error+xml",pdf:"application/pdf",pgp:"application/pgp-encrypted",asc:"application/pgp-signature",sig:"application/pgp-signature",prf:"application/pics-rules",p10:"application/pkcs10",p7m:"application/pkcs7-mime",p7c:"application/pkcs7-mime",p7s:"application/pkcs7-signature",p8:"application/pkcs8",ac:"application/pkix-attr-cert",cer:"application/pkix-cert",crl:"application/pkix-crl",pkipath:"application/pkix-pkipath",pki:"application/pkixcmp",pls:"application/pls+xml",ai:"application/postscript",eps:"application/postscript",ps:"application/postscript",cww:"application/prs.cww",pskcxml:"application/pskc+xml",rdf:"application/rdf+xml",rif:"application/reginfo+xml",rnc:"application/relax-ng-compact-syntax",rl:"application/resource-lists+xml",rld:"application/resource-lists-diff+xml",rs:"application/rls-services+xml",gbr:"application/rpki-ghostbusters",mft:"application/rpki-manifest",roa:"application/rpki-roa",rsd:"application/rsd+xml",rss:"application/rss+xml",rtf:"application/rtf",sbml:"application/sbml+xml",scq:"application/scvp-cv-request",scs:"application/scvp-cv-response",spq:"application/scvp-vp-request",spp:"application/scvp-vp-response",sdp:"application/sdp",setpay:"application/set-payment-initiation",setreg:"application/set-registration-initiation",shf:"application/shf+xml",smi:"application/smil+xml",smil:"application/smil+xml",rq:"application/sparql-query",srx:"application/sparql-results+xml",gram:"application/srgs",grxml:"application/srgs+xml",sru:"application/sru+xml",ssdl:"application/ssdl+xml",ssml:"application/ssml+xml",tei:"application/tei+xml",teicorpus:"application/tei+xml",tfi:"application/thraud+xml",tsd:"application/timestamped-data",plb:"application/vnd.3gpp.pic-bw-large",psb:"application/vnd.3gpp.pic-bw-small",pvb:"application/vnd.3gpp.pic-bw-var",tcap:"application/vnd.3gpp2.tcap",pwn:"application/vnd.3m.post-it-notes",aso:"application/vnd.accpac.simply.aso",imp:"application/vnd.accpac.simply.imp",acu:"application/vnd.acucobol",atc:"application/vnd.acucorp",acutc:"application/vnd.acucorp",air:"application/vnd.adobe.air-application-installer-package+zip",fcdt:"application/vnd.adobe.formscentral.fcdt",fxp:"application/vnd.adobe.fxp",fxpl:"application/vnd.adobe.fxp",xdp:"application/vnd.adobe.xdp+xml",xfdf:"application/vnd.adobe.xfdf",ahead:"application/vnd.ahead.space",azf:"application/vnd.airzip.filesecure.azf",azs:"application/vnd.airzip.filesecure.azs",azw:"application/vnd.amazon.ebook",acc:"application/vnd.americandynamics.acc",ami:"application/vnd.amiga.ami",apk:"application/vnd.android.package-archive",cii:"application/vnd.anser-web-certificate-issue-initiation",fti:"application/vnd.anser-web-funds-transfer-initiation",atx:"application/vnd.antix.game-component",mpkg:"application/vnd.apple.installer+xml",m3u8:"application/vnd.apple.mpegurl",swi:"application/vnd.aristanetworks.swi",iota:"application/vnd.astraea-software.iota",aep:"application/vnd.audiograph",mpm:"application/vnd.blueice.multipass",bmi:"application/vnd.bmi",rep:"application/vnd.businessobjects",cdxml:"application/vnd.chemdraw+xml",mmd:"application/vnd.chipnuts.karaoke-mmd",cdy:"application/vnd.cinderella",cla:"application/vnd.claymore",rp9:"application/vnd.cloanto.rp9",c4g:"application/vnd.clonk.c4group",c4d:"application/vnd.clonk.c4group",c4f:"application/vnd.clonk.c4group",c4p:"application/vnd.clonk.c4group",c4u:"application/vnd.clonk.c4group",c11amc:"application/vnd.cluetrust.cartomobile-config",c11amz:"application/vnd.cluetrust.cartomobile-config-pkg",csp:"application/vnd.commonspace",cdbcmsg:"application/vnd.contact.cmsg",cmc:"application/vnd.cosmocaller",clkx:"application/vnd.crick.clicker",clkk:"application/vnd.crick.clicker.keyboard",clkp:"application/vnd.crick.clicker.palette",clkt:"application/vnd.crick.clicker.template",clkw:"application/vnd.crick.clicker.wordbank",wbs:"application/vnd.criticaltools.wbs+xml",pml:"application/vnd.ctc-posml",ppd:"application/vnd.cups-ppd",car:"application/vnd.curl.car",pcurl:"application/vnd.curl.pcurl",dart:"application/vnd.dart",rdz:"application/vnd.data-vision.rdz",uvf:"application/vnd.dece.data",uvvf:"application/vnd.dece.data",uvd:"application/vnd.dece.data",uvvd:"application/vnd.dece.data",uvt:"application/vnd.dece.ttml+xml",uvvt:"application/vnd.dece.ttml+xml",uvx:"application/vnd.dece.unspecified",uvvx:"application/vnd.dece.unspecified",uvz:"application/vnd.dece.zip",uvvz:"application/vnd.dece.zip",fe_launch:"application/vnd.denovo.fcselayout-link",dna:"application/vnd.dna",mlp:"application/vnd.dolby.mlp",dpg:"application/vnd.dpgraph",dfac:"application/vnd.dreamfactory",kpxx:"application/vnd.ds-keypoint",ait:"application/vnd.dvb.ait",svc:"application/vnd.dvb.service",geo:"application/vnd.dynageo",mag:"application/vnd.ecowin.chart",nml:"application/vnd.enliven",esf:"application/vnd.epson.esf",msf:"application/vnd.epson.msf",qam:"application/vnd.epson.quickanime",slt:"application/vnd.epson.salt",ssf:"application/vnd.epson.ssf",es3:"application/vnd.eszigno3+xml",et3:"application/vnd.eszigno3+xml",ez2:"application/vnd.ezpix-album",ez3:"application/vnd.ezpix-package",fdf:"application/vnd.fdf",mseed:"application/vnd.fdsn.mseed",seed:"application/vnd.fdsn.seed",dataless:"application/vnd.fdsn.seed",gph:"application/vnd.flographit",ftc:"application/vnd.fluxtime.clip",fm:"application/vnd.framemaker",frame:"application/vnd.framemaker",maker:"application/vnd.framemaker",book:"application/vnd.framemaker",fnc:"application/vnd.frogans.fnc",ltf:"application/vnd.frogans.ltf",fsc:"application/vnd.fsc.weblaunch",oas:"application/vnd.fujitsu.oasys",oa2:"application/vnd.fujitsu.oasys2",oa3:"application/vnd.fujitsu.oasys3",fg5:"application/vnd.fujitsu.oasysgp",bh2:"application/vnd.fujitsu.oasysprs",ddd:"application/vnd.fujixerox.ddd",xdw:"application/vnd.fujixerox.docuworks",xbd:"application/vnd.fujixerox.docuworks.binder",fzs:"application/vnd.fuzzysheet",txd:"application/vnd.genomatix.tuxedo",ggb:"application/vnd.geogebra.file",ggt:"application/vnd.geogebra.tool",gex:"application/vnd.geometry-explorer",gre:"application/vnd.geometry-explorer",gxt:"application/vnd.geonext",g2w:"application/vnd.geoplan",g3w:"application/vnd.geospace",gmx:"application/vnd.gmx",kml:"application/vnd.google-earth.kml+xml",kmz:"application/vnd.google-earth.kmz",gqf:"application/vnd.grafeq",gqs:"application/vnd.grafeq",gac:"application/vnd.groove-account",ghf:"application/vnd.groove-help",gim:"application/vnd.groove-identity-message",grv:"application/vnd.groove-injector",gtm:"application/vnd.groove-tool-message",tpl:"application/vnd.groove-tool-template",vcg:"application/vnd.groove-vcard",hal:"application/vnd.hal+xml",zmm:"application/vnd.handheld-entertainment+xml",hbci:"application/vnd.hbci",les:"application/vnd.hhe.lesson-player",hpgl:"application/vnd.hp-hpgl",hpid:"application/vnd.hp-hpid",hps:"application/vnd.hp-hps",jlt:"application/vnd.hp-jlyt",pcl:"application/vnd.hp-pcl",pclxl:"application/vnd.hp-pclxl","sfd-hdstx":"application/vnd.hydrostatix.sof-data",mpy:"application/vnd.ibm.minipay",afp:"application/vnd.ibm.modcap",listafp:"application/vnd.ibm.modcap",list3820:"application/vnd.ibm.modcap",irm:"application/vnd.ibm.rights-management",sc:"application/vnd.ibm.secure-container",icc:"application/vnd.iccprofile",icm:"application/vnd.iccprofile",igl:"application/vnd.igloader",ivp:"application/vnd.immervision-ivp",ivu:"application/vnd.immervision-ivu",igm:"application/vnd.insors.igm",xpw:"application/vnd.intercon.formnet",xpx:"application/vnd.intercon.formnet",i2g:"application/vnd.intergeo",qbo:"application/vnd.intu.qbo",qfx:"application/vnd.intu.qfx",rcprofile:"application/vnd.ipunplugged.rcprofile",irp:"application/vnd.irepository.package+xml",xpr:"application/vnd.is-xpr",fcs:"application/vnd.isac.fcs",jam:"application/vnd.jam",rms:"application/vnd.jcp.javame.midlet-rms",jisp:"application/vnd.jisp",joda:"application/vnd.joost.joda-archive",ktz:"application/vnd.kahootz",ktr:"application/vnd.kahootz",karbon:"application/vnd.kde.karbon",chrt:"application/vnd.kde.kchart",kfo:"application/vnd.kde.kformula",flw:"application/vnd.kde.kivio",kon:"application/vnd.kde.kontour",kpr:"application/vnd.kde.kpresenter",kpt:"application/vnd.kde.kpresenter",ksp:"application/vnd.kde.kspread",kwd:"application/vnd.kde.kword",kwt:"application/vnd.kde.kword",htke:"application/vnd.kenameaapp",kia:"application/vnd.kidspiration",kne:"application/vnd.kinar",knp:"application/vnd.kinar",skp:"application/vnd.koan",skd:"application/vnd.koan",skt:"application/vnd.koan",skm:"application/vnd.koan",sse:"application/vnd.kodak-descriptor",lasxml:"application/vnd.las.las+xml",lbd:"application/vnd.llamagraphics.life-balance.desktop",lbe:"application/vnd.llamagraphics.life-balance.exchange+xml",apr:"application/vnd.lotus-approach",pre:"application/vnd.lotus-freelance",nsf:"application/vnd.lotus-notes",org:"application/vnd.lotus-organizer",scm:"application/vnd.lotus-screencam",lwp:"application/vnd.lotus-wordpro",portpkg:"application/vnd.macports.portpkg",mcd:"application/vnd.mcd",mc1:"application/vnd.medcalcdata",cdkey:"application/vnd.mediastation.cdkey",mwf:"application/vnd.mfer",mfm:"application/vnd.mfmp",flo:"application/vnd.micrografx.flo",igx:"application/vnd.micrografx.igx",mif:"application/vnd.mif",daf:"application/vnd.mobius.daf",dis:"application/vnd.mobius.dis",mbk:"application/vnd.mobius.mbk",mqy:"application/vnd.mobius.mqy",msl:"application/vnd.mobius.msl",plc:"application/vnd.mobius.plc",txf:"application/vnd.mobius.txf",mpn:"application/vnd.mophun.application",mpc:"application/vnd.mophun.certificate",xul:"application/vnd.mozilla.xul+xml",cil:"application/vnd.ms-artgalry",cab:"application/vnd.ms-cab-compressed",xls:"application/vnd.ms-excel",xlm:"application/vnd.ms-excel",xla:"application/vnd.ms-excel",xlc:"application/vnd.ms-excel",xlt:"application/vnd.ms-excel",xlw:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xltm:"application/vnd.ms-excel.template.macroenabled.12",eot:"application/vnd.ms-fontobject",chm:"application/vnd.ms-htmlhelp",ims:"application/vnd.ms-ims",lrm:"application/vnd.ms-lrm",thmx:"application/vnd.ms-officetheme",cat:"application/vnd.ms-pki.seccat",stl:"application/vnd.ms-pki.stl",ppt:"application/vnd.ms-powerpoint",pps:"application/vnd.ms-powerpoint",pot:"application/vnd.ms-powerpoint",ppam:"application/vnd.ms-powerpoint.addin.macroenabled.12",pptm:"application/vnd.ms-powerpoint.presentation.macroenabled.12",sldm:"application/vnd.ms-powerpoint.slide.macroenabled.12",ppsm:"application/vnd.ms-powerpoint.slideshow.macroenabled.12",potm:"application/vnd.ms-powerpoint.template.macroenabled.12",mpp:"application/vnd.ms-project",mpt:"application/vnd.ms-project",docm:"application/vnd.ms-word.document.macroenabled.12",dotm:"application/vnd.ms-word.template.macroenabled.12",wps:"application/vnd.ms-works",wks:"application/vnd.ms-works",wcm:"application/vnd.ms-works",wdb:"application/vnd.ms-works",wpl:"application/vnd.ms-wpl",xps:"application/vnd.ms-xpsdocument",mseq:"application/vnd.mseq",mus:"application/vnd.musician",msty:"application/vnd.muvee.style",taglet:"application/vnd.mynfc",nlu:"application/vnd.neurolanguage.nlu",ntf:"application/vnd.nitf",nitf:"application/vnd.nitf",nnd:"application/vnd.noblenet-directory",nns:"application/vnd.noblenet-sealer",nnw:"application/vnd.noblenet-web",ngdat:"application/vnd.nokia.n-gage.data","n-gage":"application/vnd.nokia.n-gage.symbian.install",rpst:"application/vnd.nokia.radio-preset",rpss:"application/vnd.nokia.radio-presets",edm:"application/vnd.novadigm.edm",edx:"application/vnd.novadigm.edx",ext:"application/vnd.novadigm.ext",odc:"application/vnd.oasis.opendocument.chart",otc:"application/vnd.oasis.opendocument.chart-template",odb:"application/vnd.oasis.opendocument.database",odf:"application/vnd.oasis.opendocument.formula",odft:"application/vnd.oasis.opendocument.formula-template",odg:"application/vnd.oasis.opendocument.graphics",otg:"application/vnd.oasis.opendocument.graphics-template",odi:"application/vnd.oasis.opendocument.image",oti:"application/vnd.oasis.opendocument.image-template",odp:"application/vnd.oasis.opendocument.presentation",otp:"application/vnd.oasis.opendocument.presentation-template",ods:"application/vnd.oasis.opendocument.spreadsheet",ots:"application/vnd.oasis.opendocument.spreadsheet-template",odt:"application/vnd.oasis.opendocument.text",odm:"application/vnd.oasis.opendocument.text-master",ott:"application/vnd.oasis.opendocument.text-template",oth:"application/vnd.oasis.opendocument.text-web",xo:"application/vnd.olpc-sugar",dd2:"application/vnd.oma.dd2+xml",oxt:"application/vnd.openofficeorg.extension",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",sldx:"application/vnd.openxmlformats-officedocument.presentationml.slide",ppsx:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",potx:"application/vnd.openxmlformats-officedocument.presentationml.template",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",mgp:"application/vnd.osgeo.mapguide.package",dp:"application/vnd.osgi.dp",esa:"application/vnd.osgi.subsystem",pdb:"application/vnd.palm",pqa:"application/vnd.palm",oprc:"application/vnd.palm",paw:"application/vnd.pawaafile",str:"application/vnd.pg.format",ei6:"application/vnd.pg.osasli",efif:"application/vnd.picsel",wg:"application/vnd.pmi.widget",plf:"application/vnd.pocketlearn",pbd:"application/vnd.powerbuilder6",box:"application/vnd.previewsystems.box",mgz:"application/vnd.proteus.magazine",qps:"application/vnd.publishare-delta-tree",ptid:"application/vnd.pvi.ptid1",qxd:"application/vnd.quark.quarkxpress",qxt:"application/vnd.quark.quarkxpress",qwd:"application/vnd.quark.quarkxpress",qwt:"application/vnd.quark.quarkxpress",qxl:"application/vnd.quark.quarkxpress",qxb:"application/vnd.quark.quarkxpress",bed:"application/vnd.realvnc.bed",mxl:"application/vnd.recordare.musicxml",musicxml:"application/vnd.recordare.musicxml+xml",cryptonote:"application/vnd.rig.cryptonote",cod:"application/vnd.rim.cod",rm:"application/vnd.rn-realmedia",rmvb:"application/vnd.rn-realmedia-vbr",link66:"application/vnd.route66.link66+xml",st:"application/vnd.sailingtracker.track",see:"application/vnd.seemail",sema:"application/vnd.sema",semd:"application/vnd.semd",semf:"application/vnd.semf",ifm:"application/vnd.shana.informed.formdata",itp:"application/vnd.shana.informed.formtemplate",iif:"application/vnd.shana.informed.interchange",ipk:"application/vnd.shana.informed.package",twd:"application/vnd.simtech-mindmapper",twds:"application/vnd.simtech-mindmapper",mmf:"application/vnd.smaf",teacher:"application/vnd.smart.teacher",sdkm:"application/vnd.solent.sdkm+xml",sdkd:"application/vnd.solent.sdkm+xml",dxp:"application/vnd.spotfire.dxp",sfs:"application/vnd.spotfire.sfs",sdc:"application/vnd.stardivision.calc",sda:"application/vnd.stardivision.draw",sdd:"application/vnd.stardivision.impress",smf:"application/vnd.stardivision.math",sdw:"application/vnd.stardivision.writer",vor:"application/vnd.stardivision.writer",sgl:"application/vnd.stardivision.writer-global",smzip:"application/vnd.stepmania.package",sm:"application/vnd.stepmania.stepchart",sxc:"application/vnd.sun.xml.calc",stc:"application/vnd.sun.xml.calc.template",sxd:"application/vnd.sun.xml.draw",std:"application/vnd.sun.xml.draw.template",sxi:"application/vnd.sun.xml.impress",sti:"application/vnd.sun.xml.impress.template",sxm:"application/vnd.sun.xml.math",sxw:"application/vnd.sun.xml.writer",sxg:"application/vnd.sun.xml.writer.global",stw:"application/vnd.sun.xml.writer.template",sus:"application/vnd.sus-calendar",susp:"application/vnd.sus-calendar",svd:"application/vnd.svd",sis:"application/vnd.symbian.install",sisx:"application/vnd.symbian.install",xsm:"application/vnd.syncml+xml",bdm:"application/vnd.syncml.dm+wbxml",xdm:"application/vnd.syncml.dm+xml",tao:"application/vnd.tao.intent-module-archive",pcap:"application/vnd.tcpdump.pcap",cap:"application/vnd.tcpdump.pcap",dmp:"application/vnd.tcpdump.pcap",tmo:"application/vnd.tmobile-livetv",tpt:"application/vnd.trid.tpt",mxs:"application/vnd.triscape.mxs",tra:"application/vnd.trueapp",ufd:"application/vnd.ufdl",ufdl:"application/vnd.ufdl",utz:"application/vnd.uiq.theme",umj:"application/vnd.umajin",unityweb:"application/vnd.unity",uoml:"application/vnd.uoml+xml",vcx:"application/vnd.vcx",vsd:"application/vnd.visio",vst:"application/vnd.visio",vss:"application/vnd.visio",vsw:"application/vnd.visio",vis:"application/vnd.visionary",vsf:"application/vnd.vsf",wbxml:"application/vnd.wap.wbxml",wmlc:"application/vnd.wap.wmlc",wmlsc:"application/vnd.wap.wmlscriptc",wtb:"application/vnd.webturbo",nbp:"application/vnd.wolfram.player",wpd:"application/vnd.wordperfect",wqd:"application/vnd.wqd",stf:"application/vnd.wt.stf",xar:"application/vnd.xara",xfdl:"application/vnd.xfdl",hvd:"application/vnd.yamaha.hv-dic",hvs:"application/vnd.yamaha.hv-script",hvp:"application/vnd.yamaha.hv-voice",osf:"application/vnd.yamaha.openscoreformat",osfpvg:"application/vnd.yamaha.openscoreformat.osfpvg+xml",saf:"application/vnd.yamaha.smaf-audio",spf:"application/vnd.yamaha.smaf-phrase",cmp:"application/vnd.yellowriver-custom-menu",zir:"application/vnd.zul",zirz:"application/vnd.zul",zaz:"application/vnd.zzazz.deck+xml",vxml:"application/voicexml+xml",wgt:"application/widget",hlp:"application/winhlp",wsdl:"application/wsdl+xml",wspolicy:"application/wspolicy+xml","7z":"application/x-7z-compressed",abw:"application/x-abiword",ace:"application/x-ace-compressed",dmg:"application/x-apple-diskimage",aab:"application/x-authorware-bin",x32:"application/x-authorware-bin",u32:"application/x-authorware-bin",vox:"application/x-authorware-bin",aam:"application/x-authorware-map",aas:"application/x-authorware-seg",bcpio:"application/x-bcpio",torrent:"application/x-bittorrent",blb:"application/x-blorb",blorb:"application/x-blorb",bz:"application/x-bzip",bz2:"application/x-bzip2",boz:"application/x-bzip2",cbr:"application/x-cbr",cba:"application/x-cbr",cbt:"application/x-cbr",cbz:"application/x-cbr",cb7:"application/x-cbr",vcd:"application/x-cdlink",cfs:"application/x-cfs-compressed",chat:"application/x-chat",pgn:"application/x-chess-pgn",nsc:"application/x-conference",cpio:"application/x-cpio",csh:"application/x-csh",deb:"application/x-debian-package",udeb:"application/x-debian-package",dgc:"application/x-dgc-compressed",dir:"application/x-director",dcr:"application/x-director",dxr:"application/x-director",cst:"application/x-director",cct:"application/x-director",cxt:"application/x-director",w3d:"application/x-director",fgd:"application/x-director",swa:"application/x-director",wad:"application/x-doom",ncx:"application/x-dtbncx+xml",dtb:"application/x-dtbook+xml",res:"application/x-dtbresource+xml",dvi:"application/x-dvi",evy:"application/x-envoy",eva:"application/x-eva",bdf:"application/x-font-bdf",gsf:"application/x-font-ghostscript",psf:"application/x-font-linux-psf",otf:"application/x-font-otf",pcf:"application/x-font-pcf",snf:"application/x-font-snf",ttf:"application/x-font-ttf",ttc:"application/x-font-ttf",pfa:"application/x-font-type1",pfb:"application/x-font-type1",pfm:"application/x-font-type1",afm:"application/x-font-type1",woff:"application/x-font-woff",arc:"application/x-freearc",spl:"application/x-futuresplash",gca:"application/x-gca-compressed",ulx:"application/x-glulx",gnumeric:"application/x-gnumeric",gramps:"application/x-gramps-xml",gtar:"application/x-gtar",hdf:"application/x-hdf",install:"application/x-install-instructions",iso:"application/x-iso9660-image",jnlp:"application/x-java-jnlp-file",latex:"application/x-latex",lzh:"application/x-lzh-compressed",lha:"application/x-lzh-compressed",mie:"application/x-mie",prc:"application/x-mobipocket-ebook",mobi:"application/x-mobipocket-ebook",application:"application/x-ms-application",lnk:"application/x-ms-shortcut",wmd:"application/x-ms-wmd",wmz:"application/x-msmetafile",xbap:"application/x-ms-xbap",mdb:"application/x-msaccess",obd:"application/x-msbinder",crd:"application/x-mscardfile",clp:"application/x-msclip",exe:"application/x-msdownload",dll:"application/x-msdownload",com:"application/x-msdownload",bat:"application/x-msdownload",msi:"application/x-msdownload",mvb:"application/x-msmediaview",m13:"application/x-msmediaview",m14:"application/x-msmediaview",wmf:"application/x-msmetafile",emf:"application/x-msmetafile",emz:"application/x-msmetafile",mny:"application/x-msmoney",pub:"application/x-mspublisher",scd:"application/x-msschedule",trm:"application/x-msterminal",wri:"application/x-mswrite",nc:"application/x-netcdf",cdf:"application/x-netcdf",nzb:"application/x-nzb",p12:"application/x-pkcs12",pfx:"application/x-pkcs12",p7b:"application/x-pkcs7-certificates",spc:"application/x-pkcs7-certificates",p7r:"application/x-pkcs7-certreqresp",rar:"application/x-rar-compressed",ris:"application/x-research-info-systems",sh:"application/x-sh",shar:"application/x-shar",swf:"application/x-shockwave-flash",xap:"application/x-silverlight-app",sql:"application/x-sql",sit:"application/x-stuffit",sitx:"application/x-stuffitx",srt:"application/x-subrip",sv4cpio:"application/x-sv4cpio",sv4crc:"application/x-sv4crc",t3:"application/x-t3vm-image",gam:"application/x-tads",tar:"application/x-tar",tcl:"application/x-tcl",tex:"application/x-tex",tfm:"application/x-tex-tfm",texinfo:"application/x-texinfo",texi:"application/x-texinfo",obj:"application/x-tgif",ustar:"application/x-ustar",src:"application/x-wais-source",der:"application/x-x509-ca-cert",crt:"application/x-x509-ca-cert",fig:"application/x-xfig",xlf:"application/x-xliff+xml",xpi:"application/x-xpinstall",xz:"application/x-xz",z1:"application/x-zmachine",z2:"application/x-zmachine",z3:"application/x-zmachine",z4:"application/x-zmachine",z5:"application/x-zmachine",z6:"application/x-zmachine",z7:"application/x-zmachine",z8:"application/x-zmachine",xaml:"application/xaml+xml",xdf:"application/xcap-diff+xml",xenc:"application/xenc+xml",xhtml:"application/xhtml+xml",xht:"application/xhtml+xml",xml:"application/xml",xsl:"application/xml",dtd:"application/xml-dtd",xop:"application/xop+xml",xpl:"application/xproc+xml",xslt:"application/xslt+xml",xspf:"application/xspf+xml",mxml:"application/xv+xml",xhvml:"application/xv+xml",xvml:"application/xv+xml",xvm:"application/xv+xml",yang:"application/yang",yin:"application/yin+xml",zip:"application/zip",adp:"audio/adpcm",au:"audio/basic",snd:"audio/basic",mid:"audio/midi",midi:"audio/midi",kar:"audio/midi",rmi:"audio/midi",mp4a:"audio/mp4",mpga:"audio/mpeg",mp2:"audio/mpeg",mp2a:"audio/mpeg",mp3:"audio/mpeg",m2a:"audio/mpeg",m3a:"audio/mpeg",oga:"audio/ogg",ogg:"audio/ogg",spx:"audio/ogg",s3m:"audio/s3m",sil:"audio/silk",uva:"audio/vnd.dece.audio",uvva:"audio/vnd.dece.audio",eol:"audio/vnd.digital-winds",dra:"audio/vnd.dra",dts:"audio/vnd.dts",dtshd:"audio/vnd.dts.hd",lvp:"audio/vnd.lucent.voice",pya:"audio/vnd.ms-playready.media.pya",ecelp4800:"audio/vnd.nuera.ecelp4800",ecelp7470:"audio/vnd.nuera.ecelp7470",ecelp9600:"audio/vnd.nuera.ecelp9600",rip:"audio/vnd.rip",weba:"audio/webm",aac:"audio/x-aac",aif:"audio/x-aiff",aiff:"audio/x-aiff",aifc:"audio/x-aiff",caf:"audio/x-caf",flac:"audio/x-flac",mka:"audio/x-matroska",m3u:"audio/x-mpegurl",wax:"audio/x-ms-wax",wma:"audio/x-ms-wma",ram:"audio/x-pn-realaudio",ra:"audio/x-pn-realaudio",rmp:"audio/x-pn-realaudio-plugin",wav:"audio/x-wav",xm:"audio/xm",cdx:"chemical/x-cdx",cif:"chemical/x-cif",cmdf:"chemical/x-cmdf",cml:"chemical/x-cml",csml:"chemical/x-csml",xyz:"chemical/x-xyz",bmp:"image/bmp",cgm:"image/cgm",g3:"image/g3fax",gif:"image/gif",ief:"image/ief",jpeg:"image/jpeg",jpg:"image/jpeg",jpe:"image/jpeg",ktx:"image/ktx",png:"image/png",btif:"image/prs.btif",sgi:"image/sgi",svg:"image/svg+xml",svgz:"image/svg+xml",tiff:"image/tiff",tif:"image/tiff",psd:"image/vnd.adobe.photoshop",uvi:"image/vnd.dece.graphic",uvvi:"image/vnd.dece.graphic",uvg:"image/vnd.dece.graphic",uvvg:"image/vnd.dece.graphic",sub:"text/vnd.dvb.subtitle",djvu:"image/vnd.djvu",djv:"image/vnd.djvu",dwg:"image/vnd.dwg",dxf:"image/vnd.dxf",fbs:"image/vnd.fastbidsheet",fpx:"image/vnd.fpx",fst:"image/vnd.fst",mmr:"image/vnd.fujixerox.edmics-mmr",rlc:"image/vnd.fujixerox.edmics-rlc",mdi:"image/vnd.ms-modi",wdp:"image/vnd.ms-photo",npx:"image/vnd.net-fpx",wbmp:"image/vnd.wap.wbmp",xif:"image/vnd.xiff",webp:"image/webp","3ds":"image/x-3ds",ras:"image/x-cmu-raster",cmx:"image/x-cmx",fh:"image/x-freehand",fhc:"image/x-freehand",fh4:"image/x-freehand",fh5:"image/x-freehand",fh7:"image/x-freehand",ico:"image/x-icon",sid:"image/x-mrsid-image",pcx:"image/x-pcx",pic:"image/x-pict",pct:"image/x-pict",pnm:"image/x-portable-anymap",pbm:"image/x-portable-bitmap",pgm:"image/x-portable-graymap",ppm:"image/x-portable-pixmap",rgb:"image/x-rgb",tga:"image/x-tga",xbm:"image/x-xbitmap",xpm:"image/x-xpixmap",xwd:"image/x-xwindowdump",eml:"message/rfc822",mime:"message/rfc822",igs:"model/iges",iges:"model/iges",msh:"model/mesh",mesh:"model/mesh",silo:"model/mesh",dae:"model/vnd.collada+xml",dwf:"model/vnd.dwf",gdl:"model/vnd.gdl",gtw:"model/vnd.gtw",mts:"model/vnd.mts",vtu:"model/vnd.vtu",wrl:"model/vrml",vrml:"model/vrml",x3db:"model/x3d+binary",x3dbz:"model/x3d+binary",x3dv:"model/x3d+vrml",x3dvz:"model/x3d+vrml",x3d:"model/x3d+xml",x3dz:"model/x3d+xml",appcache:"text/cache-manifest",ics:"text/calendar",ifb:"text/calendar",css:"text/css",csv:"text/csv",html:"text/html",htm:"text/html",n3:"text/n3",txt:"text/plain",text:"text/plain",conf:"text/plain",def:"text/plain",list:"text/plain",log:"text/plain",in:"text/plain",dsc:"text/prs.lines.tag",rtx:"text/richtext",sgml:"text/sgml",sgm:"text/sgml",tsv:"text/tab-separated-values",t:"text/troff",tr:"text/troff",roff:"text/troff",man:"text/troff",me:"text/troff",ms:"text/troff",ttl:"text/turtle",uri:"text/uri-list",uris:"text/uri-list",urls:"text/uri-list",vcard:"text/vcard",curl:"text/vnd.curl",dcurl:"text/vnd.curl.dcurl",scurl:"text/vnd.curl.scurl",mcurl:"text/vnd.curl.mcurl",fly:"text/vnd.fly",flx:"text/vnd.fmi.flexstor",gv:"text/vnd.graphviz","3dml":"text/vnd.in3d.3dml",spot:"text/vnd.in3d.spot",jad:"text/vnd.sun.j2me.app-descriptor",wml:"text/vnd.wap.wml",wmls:"text/vnd.wap.wmlscript",s:"text/x-asm",asm:"text/x-asm",c:"text/x-c",cc:"text/x-c",cxx:"text/x-c",cpp:"text/x-c",h:"text/x-c",hh:"text/x-c",dic:"text/x-c",f:"text/x-fortran",for:"text/x-fortran",f77:"text/x-fortran",f90:"text/x-fortran",java:"text/x-java-source",opml:"text/x-opml",p:"text/x-pascal",pas:"text/x-pascal",nfo:"text/x-nfo",etx:"text/x-setext",sfv:"text/x-sfv",uu:"text/x-uuencode",vcs:"text/x-vcalendar",vcf:"text/x-vcard","3gp":"video/3gpp","3g2":"video/3gpp2",h261:"video/h261",h263:"video/h263",h264:"video/h264",jpgv:"video/jpeg",jpm:"video/jpm",jpgm:"video/jpm",mj2:"video/mj2",mjp2:"video/mj2",mp4:"video/mp4",mp4v:"video/mp4",mpg4:"video/mp4",mpeg:"video/mpeg",mpg:"video/mpeg",mpe:"video/mpeg",m1v:"video/mpeg",m2v:"video/mpeg",ogv:"video/ogg",qt:"video/quicktime",mov:"video/quicktime",uvh:"video/vnd.dece.hd",uvvh:"video/vnd.dece.hd",uvm:"video/vnd.dece.mobile",uvvm:"video/vnd.dece.mobile",uvp:"video/vnd.dece.pd",uvvp:"video/vnd.dece.pd",uvs:"video/vnd.dece.sd",uvvs:"video/vnd.dece.sd",uvv:"video/vnd.dece.video",uvvv:"video/vnd.dece.video",dvb:"video/vnd.dvb.file",fvt:"video/vnd.fvt",mxu:"video/vnd.mpegurl",m4u:"video/vnd.mpegurl",pyv:"video/vnd.ms-playready.media.pyv",uvu:"video/vnd.uvvu.mp4",uvvu:"video/vnd.uvvu.mp4",viv:"video/vnd.vivo",webm:"video/webm",f4v:"video/x-f4v",fli:"video/x-fli",flv:"video/x-flv",m4v:"video/x-m4v",mkv:"video/x-matroska",mk3d:"video/x-matroska",mks:"video/x-matroska",mng:"video/x-mng",asf:"video/x-ms-asf",asx:"video/x-ms-asf",vob:"video/x-ms-vob",wm:"video/x-ms-wm",wmv:"video/x-ms-wmv",wmx:"video/x-ms-wmx",wvx:"video/x-ms-wvx",avi:"video/x-msvideo",movie:"video/x-sgi-movie",smv:"video/x-smv",ice:"x-conference/x-cooltalk",vtt:"text/vtt",crx:"application/x-chrome-extension",htc:"text/x-component",manifest:"text/cache-manifest",buffer:"application/octet-stream",m4p:"application/mp4",m4a:"audio/mp4",ts:"video/MP2T","event-stream":"text/event-stream",webapp:"application/x-web-app-manifest+json",lua:"text/x-lua",luac:"application/x-lua-bytecode",markdown:"text/x-markdown",md:"text/x-markdown",mkd:"text/x-markdown"},extensions:{"application/andrew-inset":"ez","application/applixware":"aw","application/atom+xml":"atom","application/atomcat+xml":"atomcat","application/atomsvc+xml":"atomsvc","application/ccxml+xml":"ccxml","application/cdmi-capability":"cdmia","application/cdmi-container":"cdmic","application/cdmi-domain":"cdmid","application/cdmi-object":"cdmio","application/cdmi-queue":"cdmiq","application/cu-seeme":"cu","application/davmount+xml":"davmount","application/docbook+xml":"dbk","application/dssc+der":"dssc","application/dssc+xml":"xdssc","application/ecmascript":"ecma","application/emma+xml":"emma","application/epub+zip":"epub","application/exi":"exi","application/font-tdpfr":"pfr","application/gml+xml":"gml","application/gpx+xml":"gpx","application/gxf":"gxf","application/hyperstudio":"stk","application/inkml+xml":"ink","application/ipfix":"ipfix","application/java-archive":"jar","application/java-serialized-object":"ser","application/java-vm":"class","application/javascript":"js","application/json":"json","application/jsonml+json":"jsonml","application/lost+xml":"lostxml","application/mac-binhex40":"hqx","application/mac-compactpro":"cpt","application/mads+xml":"mads","application/marc":"mrc","application/marcxml+xml":"mrcx","application/mathematica":"ma","application/mathml+xml":"mathml","application/mbox":"mbox","application/mediaservercontrol+xml":"mscml","application/metalink+xml":"metalink","application/metalink4+xml":"meta4","application/mets+xml":"mets","application/mods+xml":"mods","application/mp21":"m21","application/mp4":"mp4s","application/msword":"doc","application/mxf":"mxf","application/octet-stream":"bin","application/oda":"oda","application/oebps-package+xml":"opf","application/ogg":"ogx","application/omdoc+xml":"omdoc","application/onenote":"onetoc","application/oxps":"oxps","application/patch-ops-error+xml":"xer","application/pdf":"pdf","application/pgp-encrypted":"pgp","application/pgp-signature":"asc","application/pics-rules":"prf","application/pkcs10":"p10","application/pkcs7-mime":"p7m","application/pkcs7-signature":"p7s","application/pkcs8":"p8","application/pkix-attr-cert":"ac","application/pkix-cert":"cer","application/pkix-crl":"crl","application/pkix-pkipath":"pkipath","application/pkixcmp":"pki","application/pls+xml":"pls","application/postscript":"ai","application/prs.cww":"cww","application/pskc+xml":"pskcxml","application/rdf+xml":"rdf","application/reginfo+xml":"rif","application/relax-ng-compact-syntax":"rnc","application/resource-lists+xml":"rl","application/resource-lists-diff+xml":"rld","application/rls-services+xml":"rs","application/rpki-ghostbusters":"gbr","application/rpki-manifest":"mft","application/rpki-roa":"roa","application/rsd+xml":"rsd","application/rss+xml":"rss","application/rtf":"rtf","application/sbml+xml":"sbml","application/scvp-cv-request":"scq","application/scvp-cv-response":"scs","application/scvp-vp-request":"spq","application/scvp-vp-response":"spp","application/sdp":"sdp","application/set-payment-initiation":"setpay","application/set-registration-initiation":"setreg","application/shf+xml":"shf","application/smil+xml":"smi","application/sparql-query":"rq","application/sparql-results+xml":"srx","application/srgs":"gram","application/srgs+xml":"grxml","application/sru+xml":"sru","application/ssdl+xml":"ssdl","application/ssml+xml":"ssml","application/tei+xml":"tei","application/thraud+xml":"tfi","application/timestamped-data":"tsd","application/vnd.3gpp.pic-bw-large":"plb","application/vnd.3gpp.pic-bw-small":"psb","application/vnd.3gpp.pic-bw-var":"pvb","application/vnd.3gpp2.tcap":"tcap","application/vnd.3m.post-it-notes":"pwn","application/vnd.accpac.simply.aso":"aso","application/vnd.accpac.simply.imp":"imp","application/vnd.acucobol":"acu","application/vnd.acucorp":"atc","application/vnd.adobe.air-application-installer-package+zip":"air","application/vnd.adobe.formscentral.fcdt":"fcdt","application/vnd.adobe.fxp":"fxp","application/vnd.adobe.xdp+xml":"xdp","application/vnd.adobe.xfdf":"xfdf","application/vnd.ahead.space":"ahead","application/vnd.airzip.filesecure.azf":"azf","application/vnd.airzip.filesecure.azs":"azs","application/vnd.amazon.ebook":"azw","application/vnd.americandynamics.acc":"acc","application/vnd.amiga.ami":"ami","application/vnd.android.package-archive":"apk","application/vnd.anser-web-certificate-issue-initiation":"cii","application/vnd.anser-web-funds-transfer-initiation":"fti","application/vnd.antix.game-component":"atx","application/vnd.apple.installer+xml":"mpkg","application/vnd.apple.mpegurl":"m3u8","application/vnd.aristanetworks.swi":"swi","application/vnd.astraea-software.iota":"iota","application/vnd.audiograph":"aep","application/vnd.blueice.multipass":"mpm","application/vnd.bmi":"bmi","application/vnd.businessobjects":"rep","application/vnd.chemdraw+xml":"cdxml","application/vnd.chipnuts.karaoke-mmd":"mmd","application/vnd.cinderella":"cdy","application/vnd.claymore":"cla","application/vnd.cloanto.rp9":"rp9","application/vnd.clonk.c4group":"c4g","application/vnd.cluetrust.cartomobile-config":"c11amc","application/vnd.cluetrust.cartomobile-config-pkg":"c11amz","application/vnd.commonspace":"csp","application/vnd.contact.cmsg":"cdbcmsg","application/vnd.cosmocaller":"cmc","application/vnd.crick.clicker":"clkx","application/vnd.crick.clicker.keyboard":"clkk","application/vnd.crick.clicker.palette":"clkp","application/vnd.crick.clicker.template":"clkt","application/vnd.crick.clicker.wordbank":"clkw","application/vnd.criticaltools.wbs+xml":"wbs","application/vnd.ctc-posml":"pml","application/vnd.cups-ppd":"ppd","application/vnd.curl.car":"car","application/vnd.curl.pcurl":"pcurl","application/vnd.dart":"dart","application/vnd.data-vision.rdz":"rdz","application/vnd.dece.data":"uvf","application/vnd.dece.ttml+xml":"uvt","application/vnd.dece.unspecified":"uvx","application/vnd.dece.zip":"uvz","application/vnd.denovo.fcselayout-link":"fe_launch","application/vnd.dna":"dna","application/vnd.dolby.mlp":"mlp","application/vnd.dpgraph":"dpg","application/vnd.dreamfactory":"dfac","application/vnd.ds-keypoint":"kpxx","application/vnd.dvb.ait":"ait","application/vnd.dvb.service":"svc","application/vnd.dynageo":"geo","application/vnd.ecowin.chart":"mag","application/vnd.enliven":"nml","application/vnd.epson.esf":"esf","application/vnd.epson.msf":"msf","application/vnd.epson.quickanime":"qam","application/vnd.epson.salt":"slt","application/vnd.epson.ssf":"ssf","application/vnd.eszigno3+xml":"es3","application/vnd.ezpix-album":"ez2","application/vnd.ezpix-package":"ez3","application/vnd.fdf":"fdf","application/vnd.fdsn.mseed":"mseed","application/vnd.fdsn.seed":"seed","application/vnd.flographit":"gph","application/vnd.fluxtime.clip":"ftc","application/vnd.framemaker":"fm","application/vnd.frogans.fnc":"fnc","application/vnd.frogans.ltf":"ltf","application/vnd.fsc.weblaunch":"fsc","application/vnd.fujitsu.oasys":"oas","application/vnd.fujitsu.oasys2":"oa2","application/vnd.fujitsu.oasys3":"oa3","application/vnd.fujitsu.oasysgp":"fg5","application/vnd.fujitsu.oasysprs":"bh2","application/vnd.fujixerox.ddd":"ddd","application/vnd.fujixerox.docuworks":"xdw","application/vnd.fujixerox.docuworks.binder":"xbd","application/vnd.fuzzysheet":"fzs","application/vnd.genomatix.tuxedo":"txd","application/vnd.geogebra.file":"ggb","application/vnd.geogebra.tool":"ggt","application/vnd.geometry-explorer":"gex","application/vnd.geonext":"gxt","application/vnd.geoplan":"g2w","application/vnd.geospace":"g3w","application/vnd.gmx":"gmx","application/vnd.google-earth.kml+xml":"kml","application/vnd.google-earth.kmz":"kmz","application/vnd.grafeq":"gqf","application/vnd.groove-account":"gac","application/vnd.groove-help":"ghf","application/vnd.groove-identity-message":"gim","application/vnd.groove-injector":"grv","application/vnd.groove-tool-message":"gtm","application/vnd.groove-tool-template":"tpl","application/vnd.groove-vcard":"vcg","application/vnd.hal+xml":"hal","application/vnd.handheld-entertainment+xml":"zmm","application/vnd.hbci":"hbci","application/vnd.hhe.lesson-player":"les","application/vnd.hp-hpgl":"hpgl","application/vnd.hp-hpid":"hpid","application/vnd.hp-hps":"hps","application/vnd.hp-jlyt":"jlt","application/vnd.hp-pcl":"pcl","application/vnd.hp-pclxl":"pclxl","application/vnd.hydrostatix.sof-data":"sfd-hdstx","application/vnd.ibm.minipay":"mpy","application/vnd.ibm.modcap":"afp","application/vnd.ibm.rights-management":"irm","application/vnd.ibm.secure-container":"sc","application/vnd.iccprofile":"icc","application/vnd.igloader":"igl","application/vnd.immervision-ivp":"ivp","application/vnd.immervision-ivu":"ivu","application/vnd.insors.igm":"igm","application/vnd.intercon.formnet":"xpw","application/vnd.intergeo":"i2g","application/vnd.intu.qbo":"qbo","application/vnd.intu.qfx":"qfx","application/vnd.ipunplugged.rcprofile":"rcprofile","application/vnd.irepository.package+xml":"irp","application/vnd.is-xpr":"xpr","application/vnd.isac.fcs":"fcs","application/vnd.jam":"jam","application/vnd.jcp.javame.midlet-rms":"rms","application/vnd.jisp":"jisp","application/vnd.joost.joda-archive":"joda","application/vnd.kahootz":"ktz","application/vnd.kde.karbon":"karbon","application/vnd.kde.kchart":"chrt","application/vnd.kde.kformula":"kfo","application/vnd.kde.kivio":"flw","application/vnd.kde.kontour":"kon","application/vnd.kde.kpresenter":"kpr","application/vnd.kde.kspread":"ksp","application/vnd.kde.kword":"kwd","application/vnd.kenameaapp":"htke","application/vnd.kidspiration":"kia","application/vnd.kinar":"kne","application/vnd.koan":"skp","application/vnd.kodak-descriptor":"sse","application/vnd.las.las+xml":"lasxml","application/vnd.llamagraphics.life-balance.desktop":"lbd","application/vnd.llamagraphics.life-balance.exchange+xml":"lbe","application/vnd.lotus-1-2-3":"123","application/vnd.lotus-approach":"apr","application/vnd.lotus-freelance":"pre","application/vnd.lotus-notes":"nsf","application/vnd.lotus-organizer":"org","application/vnd.lotus-screencam":"scm","application/vnd.lotus-wordpro":"lwp","application/vnd.macports.portpkg":"portpkg","application/vnd.mcd":"mcd","application/vnd.medcalcdata":"mc1","application/vnd.mediastation.cdkey":"cdkey","application/vnd.mfer":"mwf","application/vnd.mfmp":"mfm","application/vnd.micrografx.flo":"flo","application/vnd.micrografx.igx":"igx","application/vnd.mif":"mif","application/vnd.mobius.daf":"daf","application/vnd.mobius.dis":"dis","application/vnd.mobius.mbk":"mbk","application/vnd.mobius.mqy":"mqy","application/vnd.mobius.msl":"msl","application/vnd.mobius.plc":"plc","application/vnd.mobius.txf":"txf","application/vnd.mophun.application":"mpn","application/vnd.mophun.certificate":"mpc","application/vnd.mozilla.xul+xml":"xul","application/vnd.ms-artgalry":"cil","application/vnd.ms-cab-compressed":"cab","application/vnd.ms-excel":"xls","application/vnd.ms-excel.addin.macroenabled.12":"xlam","application/vnd.ms-excel.sheet.binary.macroenabled.12":"xlsb","application/vnd.ms-excel.sheet.macroenabled.12":"xlsm","application/vnd.ms-excel.template.macroenabled.12":"xltm","application/vnd.ms-fontobject":"eot","application/vnd.ms-htmlhelp":"chm","application/vnd.ms-ims":"ims","application/vnd.ms-lrm":"lrm","application/vnd.ms-officetheme":"thmx","application/vnd.ms-pki.seccat":"cat","application/vnd.ms-pki.stl":"stl","application/vnd.ms-powerpoint":"ppt","application/vnd.ms-powerpoint.addin.macroenabled.12":"ppam","application/vnd.ms-powerpoint.presentation.macroenabled.12":"pptm","application/vnd.ms-powerpoint.slide.macroenabled.12":"sldm","application/vnd.ms-powerpoint.slideshow.macroenabled.12":"ppsm","application/vnd.ms-powerpoint.template.macroenabled.12":"potm","application/vnd.ms-project":"mpp","application/vnd.ms-word.document.macroenabled.12":"docm","application/vnd.ms-word.template.macroenabled.12":"dotm","application/vnd.ms-works":"wps","application/vnd.ms-wpl":"wpl","application/vnd.ms-xpsdocument":"xps","application/vnd.mseq":"mseq","application/vnd.musician":"mus","application/vnd.muvee.style":"msty","application/vnd.mynfc":"taglet","application/vnd.neurolanguage.nlu":"nlu","application/vnd.nitf":"ntf","application/vnd.noblenet-directory":"nnd","application/vnd.noblenet-sealer":"nns","application/vnd.noblenet-web":"nnw","application/vnd.nokia.n-gage.data":"ngdat","application/vnd.nokia.n-gage.symbian.install":"n-gage","application/vnd.nokia.radio-preset":"rpst","application/vnd.nokia.radio-presets":"rpss","application/vnd.novadigm.edm":"edm","application/vnd.novadigm.edx":"edx","application/vnd.novadigm.ext":"ext","application/vnd.oasis.opendocument.chart":"odc","application/vnd.oasis.opendocument.chart-template":"otc","application/vnd.oasis.opendocument.database":"odb","application/vnd.oasis.opendocument.formula":"odf","application/vnd.oasis.opendocument.formula-template":"odft","application/vnd.oasis.opendocument.graphics":"odg","application/vnd.oasis.opendocument.graphics-template":"otg","application/vnd.oasis.opendocument.image":"odi","application/vnd.oasis.opendocument.image-template":"oti","application/vnd.oasis.opendocument.presentation":"odp","application/vnd.oasis.opendocument.presentation-template":"otp","application/vnd.oasis.opendocument.spreadsheet":"ods","application/vnd.oasis.opendocument.spreadsheet-template":"ots","application/vnd.oasis.opendocument.text":"odt","application/vnd.oasis.opendocument.text-master":"odm","application/vnd.oasis.opendocument.text-template":"ott","application/vnd.oasis.opendocument.text-web":"oth","application/vnd.olpc-sugar":"xo","application/vnd.oma.dd2+xml":"dd2","application/vnd.openofficeorg.extension":"oxt","application/vnd.openxmlformats-officedocument.presentationml.presentation":"pptx","application/vnd.openxmlformats-officedocument.presentationml.slide":"sldx","application/vnd.openxmlformats-officedocument.presentationml.slideshow":"ppsx","application/vnd.openxmlformats-officedocument.presentationml.template":"potx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.template":"xltx","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","application/vnd.openxmlformats-officedocument.wordprocessingml.template":"dotx","application/vnd.osgeo.mapguide.package":"mgp","application/vnd.osgi.dp":"dp","application/vnd.osgi.subsystem":"esa","application/vnd.palm":"pdb","application/vnd.pawaafile":"paw","application/vnd.pg.format":"str","application/vnd.pg.osasli":"ei6","application/vnd.picsel":"efif","application/vnd.pmi.widget":"wg","application/vnd.pocketlearn":"plf","application/vnd.powerbuilder6":"pbd","application/vnd.previewsystems.box":"box","application/vnd.proteus.magazine":"mgz","application/vnd.publishare-delta-tree":"qps","application/vnd.pvi.ptid1":"ptid","application/vnd.quark.quarkxpress":"qxd","application/vnd.realvnc.bed":"bed","application/vnd.recordare.musicxml":"mxl","application/vnd.recordare.musicxml+xml":"musicxml","application/vnd.rig.cryptonote":"cryptonote","application/vnd.rim.cod":"cod","application/vnd.rn-realmedia":"rm","application/vnd.rn-realmedia-vbr":"rmvb","application/vnd.route66.link66+xml":"link66","application/vnd.sailingtracker.track":"st","application/vnd.seemail":"see","application/vnd.sema":"sema","application/vnd.semd":"semd","application/vnd.semf":"semf","application/vnd.shana.informed.formdata":"ifm","application/vnd.shana.informed.formtemplate":"itp","application/vnd.shana.informed.interchange":"iif","application/vnd.shana.informed.package":"ipk","application/vnd.simtech-mindmapper":"twd","application/vnd.smaf":"mmf","application/vnd.smart.teacher":"teacher","application/vnd.solent.sdkm+xml":"sdkm","application/vnd.spotfire.dxp":"dxp","application/vnd.spotfire.sfs":"sfs","application/vnd.stardivision.calc":"sdc","application/vnd.stardivision.draw":"sda","application/vnd.stardivision.impress":"sdd","application/vnd.stardivision.math":"smf","application/vnd.stardivision.writer":"sdw","application/vnd.stardivision.writer-global":"sgl","application/vnd.stepmania.package":"smzip","application/vnd.stepmania.stepchart":"sm","application/vnd.sun.xml.calc":"sxc","application/vnd.sun.xml.calc.template":"stc","application/vnd.sun.xml.draw":"sxd","application/vnd.sun.xml.draw.template":"std","application/vnd.sun.xml.impress":"sxi","application/vnd.sun.xml.impress.template":"sti","application/vnd.sun.xml.math":"sxm","application/vnd.sun.xml.writer":"sxw","application/vnd.sun.xml.writer.global":"sxg","application/vnd.sun.xml.writer.template":"stw","application/vnd.sus-calendar":"sus","application/vnd.svd":"svd","application/vnd.symbian.install":"sis","application/vnd.syncml+xml":"xsm","application/vnd.syncml.dm+wbxml":"bdm","application/vnd.syncml.dm+xml":"xdm","application/vnd.tao.intent-module-archive":"tao","application/vnd.tcpdump.pcap":"pcap","application/vnd.tmobile-livetv":"tmo","application/vnd.trid.tpt":"tpt","application/vnd.triscape.mxs":"mxs","application/vnd.trueapp":"tra","application/vnd.ufdl":"ufd","application/vnd.uiq.theme":"utz","application/vnd.umajin":"umj","application/vnd.unity":"unityweb","application/vnd.uoml+xml":"uoml","application/vnd.vcx":"vcx","application/vnd.visio":"vsd","application/vnd.visionary":"vis","application/vnd.vsf":"vsf","application/vnd.wap.wbxml":"wbxml","application/vnd.wap.wmlc":"wmlc","application/vnd.wap.wmlscriptc":"wmlsc","application/vnd.webturbo":"wtb","application/vnd.wolfram.player":"nbp","application/vnd.wordperfect":"wpd","application/vnd.wqd":"wqd","application/vnd.wt.stf":"stf","application/vnd.xara":"xar","application/vnd.xfdl":"xfdl","application/vnd.yamaha.hv-dic":"hvd","application/vnd.yamaha.hv-script":"hvs","application/vnd.yamaha.hv-voice":"hvp","application/vnd.yamaha.openscoreformat":"osf","application/vnd.yamaha.openscoreformat.osfpvg+xml":"osfpvg","application/vnd.yamaha.smaf-audio":"saf","application/vnd.yamaha.smaf-phrase":"spf","application/vnd.yellowriver-custom-menu":"cmp","application/vnd.zul":"zir","application/vnd.zzazz.deck+xml":"zaz","application/voicexml+xml":"vxml","application/widget":"wgt","application/winhlp":"hlp","application/wsdl+xml":"wsdl","application/wspolicy+xml":"wspolicy","application/x-7z-compressed":"7z","application/x-abiword":"abw","application/x-ace-compressed":"ace","application/x-apple-diskimage":"dmg","application/x-authorware-bin":"aab","application/x-authorware-map":"aam","application/x-authorware-seg":"aas","application/x-bcpio":"bcpio","application/x-bittorrent":"torrent","application/x-blorb":"blb","application/x-bzip":"bz","application/x-bzip2":"bz2","application/x-cbr":"cbr","application/x-cdlink":"vcd","application/x-cfs-compressed":"cfs","application/x-chat":"chat","application/x-chess-pgn":"pgn","application/x-conference":"nsc","application/x-cpio":"cpio","application/x-csh":"csh","application/x-debian-package":"deb","application/x-dgc-compressed":"dgc","application/x-director":"dir","application/x-doom":"wad","application/x-dtbncx+xml":"ncx","application/x-dtbook+xml":"dtb","application/x-dtbresource+xml":"res","application/x-dvi":"dvi","application/x-envoy":"evy","application/x-eva":"eva","application/x-font-bdf":"bdf","application/x-font-ghostscript":"gsf","application/x-font-linux-psf":"psf","application/x-font-otf":"otf","application/x-font-pcf":"pcf","application/x-font-snf":"snf","application/x-font-ttf":"ttf","application/x-font-type1":"pfa","application/x-font-woff":"woff","application/x-freearc":"arc","application/x-futuresplash":"spl","application/x-gca-compressed":"gca","application/x-glulx":"ulx","application/x-gnumeric":"gnumeric","application/x-gramps-xml":"gramps","application/x-gtar":"gtar","application/x-hdf":"hdf","application/x-install-instructions":"install","application/x-iso9660-image":"iso","application/x-java-jnlp-file":"jnlp","application/x-latex":"latex","application/x-lzh-compressed":"lzh","application/x-mie":"mie","application/x-mobipocket-ebook":"prc","application/x-ms-application":"application","application/x-ms-shortcut":"lnk","application/x-ms-wmd":"wmd","application/x-ms-wmz":"wmz","application/x-ms-xbap":"xbap","application/x-msaccess":"mdb","application/x-msbinder":"obd","application/x-mscardfile":"crd","application/x-msclip":"clp","application/x-msdownload":"exe","application/x-msmediaview":"mvb","application/x-msmetafile":"wmf","application/x-msmoney":"mny","application/x-mspublisher":"pub","application/x-msschedule":"scd","application/x-msterminal":"trm","application/x-mswrite":"wri","application/x-netcdf":"nc","application/x-nzb":"nzb","application/x-pkcs12":"p12","application/x-pkcs7-certificates":"p7b","application/x-pkcs7-certreqresp":"p7r","application/x-rar-compressed":"rar","application/x-research-info-systems":"ris","application/x-sh":"sh","application/x-shar":"shar","application/x-shockwave-flash":"swf","application/x-silverlight-app":"xap","application/x-sql":"sql","application/x-stuffit":"sit","application/x-stuffitx":"sitx","application/x-subrip":"srt","application/x-sv4cpio":"sv4cpio","application/x-sv4crc":"sv4crc","application/x-t3vm-image":"t3","application/x-tads":"gam","application/x-tar":"tar","application/x-tcl":"tcl","application/x-tex":"tex","application/x-tex-tfm":"tfm","application/x-texinfo":"texinfo","application/x-tgif":"obj","application/x-ustar":"ustar","application/x-wais-source":"src","application/x-x509-ca-cert":"der","application/x-xfig":"fig","application/x-xliff+xml":"xlf","application/x-xpinstall":"xpi","application/x-xz":"xz","application/x-zmachine":"z1","application/xaml+xml":"xaml","application/xcap-diff+xml":"xdf","application/xenc+xml":"xenc","application/xhtml+xml":"xhtml","application/xml":"xml","application/xml-dtd":"dtd","application/xop+xml":"xop","application/xproc+xml":"xpl","application/xslt+xml":"xslt","application/xspf+xml":"xspf","application/xv+xml":"mxml","application/yang":"yang","application/yin+xml":"yin","application/zip":"zip","audio/adpcm":"adp","audio/basic":"au","audio/midi":"mid","audio/mp4":"mp4a","audio/mpeg":"mpga","audio/ogg":"oga","audio/s3m":"s3m","audio/silk":"sil","audio/vnd.dece.audio":"uva","audio/vnd.digital-winds":"eol","audio/vnd.dra":"dra","audio/vnd.dts":"dts","audio/vnd.dts.hd":"dtshd","audio/vnd.lucent.voice":"lvp","audio/vnd.ms-playready.media.pya":"pya","audio/vnd.nuera.ecelp4800":"ecelp4800","audio/vnd.nuera.ecelp7470":"ecelp7470","audio/vnd.nuera.ecelp9600":"ecelp9600","audio/vnd.rip":"rip","audio/webm":"weba","audio/x-aac":"aac","audio/x-aiff":"aif","audio/x-caf":"caf","audio/x-flac":"flac","audio/x-matroska":"mka","audio/x-mpegurl":"m3u","audio/x-ms-wax":"wax","audio/x-ms-wma":"wma","audio/x-pn-realaudio":"ram","audio/x-pn-realaudio-plugin":"rmp","audio/x-wav":"wav","audio/xm":"xm","chemical/x-cdx":"cdx","chemical/x-cif":"cif","chemical/x-cmdf":"cmdf","chemical/x-cml":"cml","chemical/x-csml":"csml","chemical/x-xyz":"xyz","image/bmp":"bmp","image/cgm":"cgm","image/g3fax":"g3","image/gif":"gif","image/ief":"ief","image/jpeg":"jpeg","image/ktx":"ktx","image/png":"png","image/prs.btif":"btif","image/sgi":"sgi","image/svg+xml":"svg","image/tiff":"tiff","image/vnd.adobe.photoshop":"psd","image/vnd.dece.graphic":"uvi","image/vnd.dvb.subtitle":"sub","image/vnd.djvu":"djvu","image/vnd.dwg":"dwg","image/vnd.dxf":"dxf","image/vnd.fastbidsheet":"fbs","image/vnd.fpx":"fpx","image/vnd.fst":"fst","image/vnd.fujixerox.edmics-mmr":"mmr","image/vnd.fujixerox.edmics-rlc":"rlc","image/vnd.ms-modi":"mdi","image/vnd.ms-photo":"wdp","image/vnd.net-fpx":"npx","image/vnd.wap.wbmp":"wbmp","image/vnd.xiff":"xif","image/webp":"webp","image/x-3ds":"3ds","image/x-cmu-raster":"ras","image/x-cmx":"cmx","image/x-freehand":"fh","image/x-icon":"ico","image/x-mrsid-image":"sid","image/x-pcx":"pcx","image/x-pict":"pic","image/x-portable-anymap":"pnm","image/x-portable-bitmap":"pbm","image/x-portable-graymap":"pgm","image/x-portable-pixmap":"ppm","image/x-rgb":"rgb","image/x-tga":"tga","image/x-xbitmap":"xbm","image/x-xpixmap":"xpm","image/x-xwindowdump":"xwd","message/rfc822":"eml","model/iges":"igs","model/mesh":"msh","model/vnd.collada+xml":"dae","model/vnd.dwf":"dwf","model/vnd.gdl":"gdl","model/vnd.gtw":"gtw","model/vnd.mts":"mts","model/vnd.vtu":"vtu","model/vrml":"wrl","model/x3d+binary":"x3db","model/x3d+vrml":"x3dv","model/x3d+xml":"x3d","text/cache-manifest":"appcache","text/calendar":"ics","text/css":"css","text/csv":"csv","text/html":"html","text/n3":"n3","text/plain":"txt","text/prs.lines.tag":"dsc","text/richtext":"rtx","text/sgml":"sgml","text/tab-separated-values":"tsv","text/troff":"t","text/turtle":"ttl","text/uri-list":"uri","text/vcard":"vcard","text/vnd.curl":"curl","text/vnd.curl.dcurl":"dcurl","text/vnd.curl.scurl":"scurl","text/vnd.curl.mcurl":"mcurl","text/vnd.dvb.subtitle":"sub","text/vnd.fly":"fly","text/vnd.fmi.flexstor":"flx","text/vnd.graphviz":"gv","text/vnd.in3d.3dml":"3dml","text/vnd.in3d.spot":"spot","text/vnd.sun.j2me.app-descriptor":"jad","text/vnd.wap.wml":"wml","text/vnd.wap.wmlscript":"wmls","text/x-asm":"s","text/x-c":"c","text/x-fortran":"f","text/x-java-source":"java","text/x-opml":"opml","text/x-pascal":"p","text/x-nfo":"nfo","text/x-setext":"etx","text/x-sfv":"sfv","text/x-uuencode":"uu","text/x-vcalendar":"vcs","text/x-vcard":"vcf","video/3gpp":"3gp","video/3gpp2":"3g2","video/h261":"h261","video/h263":"h263","video/h264":"h264","video/jpeg":"jpgv","video/jpm":"jpm","video/mj2":"mj2","video/mp4":"mp4","video/mpeg":"mpeg","video/ogg":"ogv","video/quicktime":"qt","video/vnd.dece.hd":"uvh","video/vnd.dece.mobile":"uvm","video/vnd.dece.pd":"uvp","video/vnd.dece.sd":"uvs","video/vnd.dece.video":"uvv","video/vnd.dvb.file":"dvb","video/vnd.fvt":"fvt","video/vnd.mpegurl":"mxu","video/vnd.ms-playready.media.pyv":"pyv","video/vnd.uvvu.mp4":"uvu","video/vnd.vivo":"viv","video/webm":"webm","video/x-f4v":"f4v","video/x-fli":"fli","video/x-flv":"flv","video/x-m4v":"m4v","video/x-matroska":"mkv","video/x-mng":"mng","video/x-ms-asf":"asf","video/x-ms-vob":"vob","video/x-ms-wm":"wm","video/x-ms-wmv":"wmv","video/x-ms-wmx":"wmx","video/x-ms-wvx":"wvx","video/x-msvideo":"avi","video/x-sgi-movie":"movie","video/x-smv":"smv","x-conference/x-cooltalk":"ice","text/vtt":"vtt","application/x-chrome-extension":"crx","text/x-component":"htc","video/MP2T":"ts","text/event-stream":"event-stream","application/x-web-app-manifest+json":"webapp","text/x-lua":"lua","application/x-lua-bytecode":"luac","text/x-markdown":"markdown"},extension:function(t){var a=t.match(/^\s*([^;\s]*)(?:;|\s|$)/)[1].toLowerCase();return this.extensions[a]},define:function(t){for(var a in t){for(var e=t[a],i=0;i<e.length;i++)this.types[e[i]]=a;this.extensions[a]||(this.extensions[a]=e[0])}},charsets:{lookup:function(t,a){return/^text\//.test(t)?"UTF-8":a}}};i.types.constructor=void 0,i.extensions.constructor=void 0},{}],42:[function(t,a,e){(function(e){var i=t("querystring"),n=t("url"),o=t("util"),p=t("underscore"),l=t("extend"),r=t("./../../common/common.core"),s=t("./internal/blockrangestream"),c=t("./../../common/md5-wrapper"),d=t("./internal/pagerangestream"),m=t("./../../common/streams/rangestream"),u=r.util,v=r.SR,f=r.validate,g=r.StorageServiceClient,x=r.WebResource,b=r.Constants,h=b.BlobConstants,y=b.HeaderConstants,w=b.QueryStringConstants,E=b.RequestLocationMode,_=r.BatchOperation,k=r.SpeedSummary,S=r.ChunkAllocator,B=r.ChunkStream,T=r.ChunkStreamWithStream,I=r.AclResult,A=r.ServiceStatsParser,R=t("./models/blocklistresult"),C=t("./models/blobresult"),N=t("./models/containerresult"),O=t("./models/leaseresult"),P=t("./blobutilities"),L=t("../../common/errors/errors"),M=L.ArgumentError,D=L.ArgumentNullError,z=L.StorageError;function H(t,a,e,i,n){var o=g.getStorageSettings(t,a,e,i,n);H.super_.call(this,o._name,o._key,o._blobEndpoint,o._usePathStyleUri,o._sasToken),this.defaultEnableReuseSocket=b.DEFAULT_ENABLE_REUSE_SOCKET,this.singleBlobPutThresholdInBytes=h.DEFAULT_SINGLE_BLOB_PUT_THRESHOLD_IN_BYTES,this.parallelOperationThreadCount=b.DEFAULT_PARALLEL_OPERATION_THREAD_COUNT}function j(t,a,e){return a&&!e&&(a=(a=(a=(a=encodeURIComponent(a)).replace(/%2F/g,"/")).replace(/%5C/g,"/")).replace(/\+/g,"%20")),a?t+"/"+a:t}o.inherits(H,g),H.prototype.getServiceStats=function(t,a){var e;u.normalizeArgs(t,a,function(t,i){e=t,a=i}),f.validateArgs("getServiceStats",function(t){t.callback(a)});var i=x.get().withQueryOption(w.COMP,"stats").withQueryOption(w.RESTYPE,"service");e.requestLocationMode=E.PRIMARY_OR_SECONDARY;this.performRequest(i,null,e,function(t,e){t.serviceStatsResult=null,t.error||(t.serviceStatsResult=A.parse(t.response.body.StorageServiceStats));e(t,function(t){a(t.error,t.serviceStatsResult,t.response)})})},H.prototype.getServiceProperties=function(t,a){return this.getAccountServiceProperties(t,a)},H.prototype.setServiceProperties=function(t,a,e){return this.setAccountServiceProperties(t,a,e)},H.prototype.setBlobTier=function(t,a,e,i,n){var o;u.normalizeArgs(i,n,function(t,a){o=t,n=a}),f.validateArgs("setBlobTier",function(i){i.string(t,"container"),i.string(a,"blob"),i.string(e,"blobTier"),i.containerNameIsValid(t),i.blobNameIsValid(t,a),i.blobTierNameIsValid(e),i.callback(n)});var p=l(!0,{},o),r=j(t,a),s=x.put(r).withQueryOption(w.COMP,"tier").withHeader(y.ACCESS_TIER,e);this.performRequest(s,null,p,function(t,a){a(t,function(t){n(t.error,t.response)})})},H.prototype.listContainersSegmented=function(t,a,e){this.listContainersSegmentedWithPrefix(null,t,a,e)},H.prototype.listContainersSegmentedWithPrefix=function(t,a,e,i){var n;u.normalizeArgs(e,i,function(t,a){n=t,i=a}),f.validateArgs("listContainers",function(t){t.callback(i)});var o=l(!0,{},n),r=x.get().withQueryOption(w.COMP,"list").withQueryOption(w.MAX_RESULTS,o.maxResults).withQueryOption(w.INCLUDE,o.include);u.objectIsNull(a)||r.withQueryOption(w.MARKER,a.nextMarker),r.withQueryOption(w.PREFIX,t),o.requestLocationMode=u.getNextListingLocationMode(a);this.performRequest(r,null,o,function(t,a){if(t.listContainersResult=null,!t.error){t.listContainersResult={entries:null,continuationToken:null},t.listContainersResult.entries=[];var e=[];t.response.body.EnumerationResults.Containers&&t.response.body.EnumerationResults.Containers.Container&&(e=t.response.body.EnumerationResults.Containers.Container,p.isArray(e)||(e=[e])),e.forEach(function(a){var e=N.parse(a);t.listContainersResult.entries.push(e)}),t.response.body.EnumerationResults.NextMarker&&(t.listContainersResult.continuationToken={nextMarker:null,targetLocation:null},t.listContainersResult.continuationToken.nextMarker=t.response.body.EnumerationResults.NextMarker,t.listContainersResult.continuationToken.targetLocation=t.targetLocation)}a(t,function(t){i(t.error,t.listContainersResult,t.response)})})},H.prototype.doesContainerExist=function(t,a,e){var i;u.normalizeArgs(a,e,function(t,a){i=t,e=a}),f.validateArgs("doesContainerExist",function(a){a.string(t,"container"),a.containerNameIsValid(t),a.callback(e)});var n=l(!0,{},i);this._doesContainerExist(t,!1,n,e)},H.prototype.createContainer=function(t,a,e){var i;u.normalizeArgs(a,e,function(t,a){i=t,e=a}),f.validateArgs("createContainer",function(a){a.string(t,"container"),a.test(function(){return"$logs"!==t},"Container name format is incorrect"),a.containerNameIsValid(t),a.callback(e)});var n=l(!0,{},i),o=x.put(t).withQueryOption(w.RESTYPE,"container");o.addOptionalMetadataHeaders(n.metadata),o.withHeader(y.BLOB_PUBLIC_ACCESS,n.publicAccessLevel);this.performRequest(o,null,n,function(a,i){a.containerResult=null,a.error||(a.containerResult=new N(t),a.containerResult.getPropertiesFromHeaders(a.response.headers),n.metadata&&(a.containerResult.metadata=n.metadata));i(a,function(t){e(t.error,t.containerResult,t.response)})})},H.prototype.createContainerIfNotExists=function(t,a,e){var i;u.normalizeArgs(a,e,function(t,a){i=t,e=a}),f.validateArgs("createContainerIfNotExists",function(a){a.string(t,"container"),a.containerNameIsValid(t),a.callback(e)});var n=l(!0,{},i),o=this;o._doesContainerExist(t,!0,n,function(a,i,p){var l=i.exists;i.created=!1,delete i.exists,a?e(a,i,p):l?(p.isSuccessful=!0,e(a,i,p)):o.createContainer(t,n,function(t,a,i){t?t&&t.statusCode===b.HttpConstants.HttpResponseCodes.Conflict&&t.code===b.BlobErrorCodeStrings.CONTAINER_ALREADY_EXISTS&&(t=null,i.isSuccessful=!0):a.created=!0,e(t,a,i)})})},H.prototype.getContainerProperties=function(t,a,e){var i;u.normalizeArgs(a,e,function(t,a){i=t,e=a}),f.validateArgs("getContainerProperties",function(a){a.string(t,"container"),a.containerNameIsValid(t),a.callback(e)});var n=l(!0,{},i),o=x.head(t).withQueryOption(w.RESTYPE,"container").withHeader(y.LEASE_ID,n.leaseId);n.requestLocationMode=b.RequestLocationMode.PRIMARY_OR_SECONDARY;var p=this;this.performRequest(o,null,n,function(a,i){a.containerResult=null,a.error||(a.containerResult=new N(t),a.containerResult.metadata=p.parseMetadataHeaders(a.response.headers),a.containerResult.getPropertiesFromHeaders(a.response.headers));i(a,function(t){e(t.error,t.containerResult,t.response)})})},H.prototype.getContainerMetadata=function(t,a,e){var i;u.normalizeArgs(a,e,function(t,a){i=t,e=a}),f.validateArgs("getContainerMetadata",function(a){a.string(t,"container"),a.containerNameIsValid(t),a.callback(e)});var n=l(!0,{},i),o=x.head(t).withQueryOption(w.RESTYPE,"container").withQueryOption(w.COMP,"metadata").withHeader(y.LEASE_ID,n.leaseId);n.requestLocationMode=b.RequestLocationMode.PRIMARY_OR_SECONDARY;var p=this;this.performRequest(o,null,n,function(a,i){a.containerResult=null,a.error||(a.containerResult=new N(t),a.containerResult.metadata=p.parseMetadataHeaders(a.response.headers),a.containerResult.getPropertiesFromHeaders(a.response.headers));i(a,function(t){e(t.error,t.containerResult,t.response)})})},H.prototype.setContainerMetadata=function(t,a,e,i){var n;u.normalizeArgs(e,i,function(t,a){n=t,i=a}),f.validateArgs("setContainerMetadata",function(e){e.string(t,"container"),e.object(a,"metadata"),e.containerNameIsValid(t),e.callback(i)});var o=l(!0,{},n),p=x.put(t).withQueryOption(w.RESTYPE,"container").withQueryOption(w.COMP,"metadata").withHeader(y.LEASE_ID,o.leaseId);p.addOptionalMetadataHeaders(a);this.performRequest(p,null,o,function(a,e){a.containerResult=null,a.error||(a.containerResult=new N(t),a.containerResult.getPropertiesFromHeaders(a.response.headers));e(a,function(t){i(t.error,t.containerResult,t.response)})})},H.prototype.getContainerAcl=function(t,a,e){var i;u.normalizeArgs(a,e,function(t,a){i=t,e=a}),f.validateArgs("getContainerAcl",function(a){a.string(t,"container"),a.containerNameIsValid(t),a.callback(e)});var n=l(!0,{},i),o=x.get(t).withQueryOption(w.RESTYPE,"container").withQueryOption(w.COMP,"acl").withHeader(y.LEASE_ID,n.leaseId);n.requestLocationMode=b.RequestLocationMode.PRIMARY_OR_SECONDARY;this.performRequest(o,null,n,function(a,i){a.containerResult=null,a.error||(a.containerResult=new N(t),a.containerResult.getPropertiesFromHeaders(a.response.headers),a.containerResult.signedIdentifiers=I.parse(a.response.body));i(a,function(t){e(t.error,t.containerResult,t.response)})})},H.prototype.setContainerAcl=function(t,a,i,n){var o;u.normalizeArgs(i,n,function(t,a){o=t,n=a}),f.validateArgs("setContainerAcl",function(a){a.string(t,"container"),a.containerNameIsValid(t),a.callback(n)});var r=l(!0,{},o),s=null;if(a){if(p.isArray(a))throw new TypeError(v.INVALID_SIGNED_IDENTIFIERS);s=I.serialize(a)}var c=x.put(t).withQueryOption(w.RESTYPE,"container").withQueryOption(w.COMP,"acl").withHeader(y.CONTENT_LENGTH,u.objectIsNull(s)?0:e.byteLength(s)).withHeader(y.BLOB_PUBLIC_ACCESS,r.publicAccessLevel).withHeader(y.LEASE_ID,r.leaseId).withBody(s);this.performRequest(c,c.body,r,function(e,i){e.containerResult=null,e.error||(e.containerResult=new N(t,r.publicAccessLevel),e.containerResult.getPropertiesFromHeaders(e.response.headers),a&&(e.containerResult.signedIdentifiers=a));i(e,function(t){n(t.error,t.containerResult,t.response)})})},H.prototype.deleteContainer=function(t,a,e){var i;u.normalizeArgs(a,e,function(t,a){i=t,e=a}),f.validateArgs("deleteContainer",function(a){a.string(t,"container"),a.containerNameIsValid(t),a.callback(e)});var n=l(!0,{},i),o=x.del(t).withQueryOption(w.RESTYPE,"container").withHeader(y.LEASE_ID,n.leaseId);this.performRequest(o,null,n,function(t,a){a(t,function(t){e(t.error,t.response)})})},H.prototype.deleteContainerIfExists=function(t,a,e){var i;u.normalizeArgs(a,e,function(t,a){i=t,e=a}),f.validateArgs("deleteContainerIfExists",function(a){a.string(t,"container"),a.containerNameIsValid(t),a.callback(e)});var n=l(!0,{},i),o=this;o._doesContainerExist(t,!0,n,function(a,i,p){a?e(a,i.exists,p):i.exists?o.deleteContainer(t,n,function(t,a){var i;t?t&&t.statuscode===b.HttpConstants.HttpResponseCodes.NotFound&&t.code===b.BlobErrorCodeStrings.CONTAINER_NOT_FOUND&&(i=!1,t=null,a.isSuccessful=!0):i=!0,e(t,i,a)}):(p.isSuccessful=!0,e(a,!1,p))})},H.prototype.listBlobDirectoriesSegmented=function(t,a,e,i){this.listBlobDirectoriesSegmentedWithPrefix(t,null,a,e,i)},H.prototype.listBlobDirectoriesSegmentedWithPrefix=function(t,a,e,i,n){var o;u.normalizeArgs(i,n,function(t,a){o=t,n=a}),o.delimiter="/",this._listBlobsOrDircotriesSegmentedWithPrefix(t,a,e,h.ListBlobTypes.Directory,o,n)},H.prototype.listBlobsSegmented=function(t,a,e,i){this.listBlobsSegmentedWithPrefix(t,null,a,e,i)},H.prototype.listBlobsSegmentedWithPrefix=function(t,a,e,i,n){this._listBlobsOrDircotriesSegmentedWithPrefix(t,a,e,h.ListBlobTypes.Blob,i,n)},H.prototype.acquireLease=function(t,a,e,i){var n;u.normalizeArgs(e,i,function(t,a){n=t,i=a}),f.validateArgs("acquireLease",function(a){a.string(t,"container"),a.containerNameIsValid(t),a.callback(i)});var o=l(!0,{},n);o.leaseDuration||(o.leaseDuration=-1),this._leaseImpl(t,a,null,h.LeaseOperation.ACQUIRE,o,i)},H.prototype.renewLease=function(t,a,e,i,n){var o;u.normalizeArgs(i,n,function(t,a){o=t,n=a}),f.validateArgs("renewLease",function(a){a.string(t,"container"),a.containerNameIsValid(t),a.callback(n)});var p=l(!0,{},o);this._leaseImpl(t,a,e,h.LeaseOperation.RENEW,p,n)},H.prototype.changeLease=function(t,a,e,i,n,o){var p;u.normalizeArgs(n,o,function(t,a){p=t,o=a}),f.validateArgs("changeLease",function(a){a.string(t,"container"),a.containerNameIsValid(t),a.callback(o)});var r=l(!0,{},p);r.proposedLeaseId=i,this._leaseImpl(t,a,e,h.LeaseOperation.CHANGE,r,o)},H.prototype.releaseLease=function(t,a,e,i,n){var o;u.normalizeArgs(i,n,function(t,a){o=t,n=a}),f.validateArgs("releaseLease",function(a){a.string(t,"container"),a.containerNameIsValid(t),a.callback(n)});var p=l(!0,{},o);this._leaseImpl(t,a,e,h.LeaseOperation.RELEASE,p,n)},H.prototype.breakLease=function(t,a,e,i){var n;u.normalizeArgs(e,i,function(t,a){n=t,i=a}),f.validateArgs("breakLease",function(a){a.string(t,"container"),a.containerNameIsValid(t),a.callback(i)});var o=l(!0,{},n);this._leaseImpl(t,a,null,h.LeaseOperation.BREAK,o,i)},H.prototype.getBlobProperties=function(t,a,e,i){var n;u.normalizeArgs(e,i,function(t,a){n=t,i=a}),f.validateArgs("getBlobProperties",function(e){e.string(t,"container"),e.string(a,"blob"),e.containerNameIsValid(t),e.callback(i)});var o=l(!0,{},n),p=j(t,a),r=x.head(p);o.snapshotId&&r.withQueryOption(w.SNAPSHOT,o.snapshotId),C.setHeadersFromBlob(r,o),o.requestLocationMode=b.RequestLocationMode.PRIMARY_OR_SECONDARY;var s=this;this.performRequest(r,null,o,function(e,n){e.blobResult=null,e.error||(e.blobResult=new C(t,a),e.blobResult.metadata=s.parseMetadataHeaders(e.response.headers),e.blobResult.getPropertiesFromHeaders(e.response.headers));n(e,function(t){i(t.error,t.blobResult,t.response)})})},H.prototype.getBlobMetadata=function(t,a,e,i){var n;u.normalizeArgs(e,i,function(t,a){n=t,i=a}),f.validateArgs("getBlobMetadata",function(e){e.string(t,"container"),e.string(a,"blob"),e.containerNameIsValid(t),e.callback(i)});var o=l(!0,{},n),p=j(t,a),r=x.head(p);r.withQueryOption(w.COMP,"metadata"),r.withQueryOption(w.SNAPSHOT,o.snapshotId),C.setHeadersFromBlob(r,o),o.requestLocationMode=b.RequestLocationMode.PRIMARY_OR_SECONDARY;var s=this;this.performRequest(r,null,o,function(e,n){e.blobResult=null,e.error||(e.blobResult=new C(t,a),e.blobResult.metadata=s.parseMetadataHeaders(e.response.headers),e.blobResult.getPropertiesFromHeaders(e.response.headers));n(e,function(t){i(t.error,t.blobResult,t.response)})})},H.prototype.setBlobProperties=function(t,a,e,i,n){var o;u.normalizeArgs(i,n,function(t,a){o=t,n=a}),f.validateArgs("setBlobProperties",function(e){e.string(t,"container"),e.string(a,"blob"),e.containerNameIsValid(t),e.callback(n)});var p=l(!0,{contentSettings:e},o),r=j(t,a),s=x.put(r).withQueryOption(w.COMP,"properties");C.setPropertiesFromBlob(s,p),this._setBlobPropertiesHelper({webResource:s,options:p,container:t,blob:a,callback:n})},H.prototype.setBlobMetadata=function(t,a,e,i,n){var o;u.normalizeArgs(i,n,function(t,a){o=t,n=a}),f.validateArgs("setBlobMetadata",function(i){i.string(t,"container"),i.string(a,"blob"),i.object(e,"metadata"),i.containerNameIsValid(t),i.callback(n)});var p=l(!0,{},o),r=j(t,a),s=x.put(r).withQueryOption(w.COMP,"metadata");s.withQueryOption(w.SNAPSHOT,p.snapshotId),p.metadata=e,C.setHeadersFromBlob(s,p);this.performRequest(s,null,p,function(e,i){e.blobResult=null,e.error||(e.blobResult=new C(t,a),e.blobResult.getPropertiesFromHeaders(e.response.headers));i(e,function(t){n(t.error,t.blobResult,t.response)})})},H.prototype.createReadStream=function(t,a,e,i){var n;u.normalizeArgs(e,i,function(t,a){n=t,i=a}),f.validateArgs("createReadStream",function(e){e.string(t,"container"),e.string(a,"blob"),e.containerNameIsValid(t)});var o=new B;return this.getBlobToStream(t,a,o,n,function(t,a,e){t&&o.emit("error",t),i&&i(t,a,e)}),o},H.prototype.getBlobToStream=function(t,a,e,i,n){var o;u.normalizeArgs(i,n,function(t,a){o=t,n=a}),o.speedSummary=o.speedSummary||new k(a),f.validateArgs("getBlobToStream",function(i){i.string(t,"container"),i.string(a,"blob"),i.object(e,"writeStream"),i.containerNameIsValid(t),i.callback(n)});var p=l(!0,{},o),r={timeoutIntervalInMs:p.timeoutIntervalInMs,clientRequestTimeoutInMs:p.clientRequestTimeoutInMs,snapshotId:p.snapshotId,accessConditions:p.accessConditions};if(p.skipSizeCheck)this._getBlobToStream(t,a,e,p,n);else{var s=this;this.getBlobProperties(t,a,r,function(i,o){if(i)n(i);else{var l;if(p.rangeStart){var r=o.contentLength-1;l=(p.rangeEnd?Math.min(p.rangeEnd,r):r)-p.rangeStart+1}else l=o.contentLength;p.speedSummary.totalSize=l,l>s.singleBlobPutThresholdInBytes?(u.setObjectInnerPropertyValue(p,["contentSettings","contentMD5"],u.tryGetValueChain(o,["contentSettings","contentMD5"],null)),s._getBlobToRangeStream(t,a,o.blobType,e,p,n)):s._getBlobToStream(t,a,e,p,n)}})}return p.speedSummary},H.prototype.getBlobToText=function(t,a,e,i){var n;u.normalizeArgs(e,i,function(t,a){n=t,i=a}),f.validateArgs("getBlobToText",function(e){e.string(t,"container"),e.string(a,"blob"),e.containerNameIsValid(t),e.callback(i)});var o=l(!0,{},n),p=j(t,a),r=x.get(p).withRawResponse();r.withQueryOption(w.SNAPSHOT,o.snapshotId),C.setHeadersFromBlob(r,o),this._setRangeContentMD5Header(r,o),o.requestLocationMode=b.RequestLocationMode.PRIMARY_OR_SECONDARY;var s=this;this.performRequest(r,null,o,function(e,n){e.text=null,e.blobResult=null,e.error||(e.blobResult=new C(t,a),e.blobResult.metadata=s.parseMetadataHeaders(e.response.headers),e.blobResult.getPropertiesFromHeaders(e.response.headers),e.text=e.response.body,s._validateLengthAndMD5(o,e));n(e,function(t){i(t.error,t.text,t.blobResult,t.response)})})},H.prototype.deleteBlob=function(t,a,e,i){var n;u.normalizeArgs(e,i,function(t,a){n=t,i=a}),f.validateArgs("deleteBlob",function(e){e.string(t,"container"),e.string(a,"blob"),e.containerNameIsValid(t),e.callback(i)});var o=l(!0,{},n),p=j(t,a),r=x.del(p).withHeader(y.LEASE_ID,o.leaseId);if(!u.objectIsNull(o.snapshotId)&&!u.objectIsNull(o.deleteSnapshots))throw new M("options",v.INVALID_DELETE_SNAPSHOT_OPTION);r.withQueryOption(w.SNAPSHOT,o.snapshotId),r.withHeader(y.DELETE_SNAPSHOT,o.deleteSnapshots),C.setHeadersFromBlob(r,o);this.performRequest(r,null,o,function(t,a){a(t,function(t){i(t.error,t.response)})})},H.prototype.undeleteBlob=function(t,a,e,i){var n;u.normalizeArgs(e,i,function(t,a){n=t,i=a}),f.validateArgs("deleteBlob",function(e){e.string(t,"container"),e.string(a,"blob"),e.containerNameIsValid(t),e.callback(i)});var o=l(!0,{},n),p=j(t,a),r=x.put(p).withQueryOption(w.COMP,"undelete");C.setHeadersFromBlob(r,o);this.performRequest(r,null,o,function(t,a){a(t,function(t){i(t.error,t.response)})})},H.prototype.doesBlobExist=function(t,a,e,i){var n;u.normalizeArgs(e,i,function(t,a){n=t,i=a}),f.validateArgs("doesBlobExist",function(e){e.string(t,"container"),e.string(a,"blob"),e.containerNameIsValid(t),e.callback(i)});var o=l(!0,{},n);this._doesBlobExist(t,a,!1,o,i)},H.prototype.deleteBlobIfExists=function(t,a,e,i){var n;u.normalizeArgs(e,i,function(t,a){n=t,i=a}),f.validateArgs("deleteBlobIfExists",function(e){e.string(t,"container"),e.string(a,"blob"),e.containerNameIsValid(t),e.callback(i)});var o=l(!0,{},n),p=this;p._doesBlobExist(t,a,!0,o,function(e,n,l){e?i(e,n.exists,l):n.exists?p.deleteBlob(t,a,o,function(t,a){var e;t?t&&t.statusCode===b.HttpConstants.HttpResponseCodes.NotFound&&t.code===b.BlobErrorCodeStrings.BLOB_NOT_FOUND&&(e=!1,t=null,a.isSuccessful=!0):e=!0,i(t,e,a)}):(l.isSuccessful=!0,i(e,!1,l))})},H.prototype.createBlobSnapshot=function(t,a,e,i){var n;u.normalizeArgs(e,i,function(t,a){n=t,i=a}),f.validateArgs("createBlobSnapshot",function(e){e.string(t,"container"),e.string(a,"blob"),e.containerNameIsValid(t),e.callback(i)});var o=l(!0,{},n),p=j(t,a),r=x.put(p).withQueryOption(w.COMP,"snapshot");C.setHeadersFromBlob(r,o);this.performRequest(r,null,o,function(t,a){t.snapshotId=null,t.error||(t.snapshotId=t.response.headers[y.SNAPSHOT]);a(t,function(t){i(t.error,t.snapshotId,t.response)})})},H.prototype.startCopyBlob=function(t,a,e,i,o){var p;u.normalizeArgs(i,o,function(t,a){p=t,o=a}),f.validateArgs("startCopyBlob",function(i){i.string(t,"sourceUri"),i.string(a,"targetContainer"),i.string(e,"targetBlob"),i.containerNameIsValid(a),i.callback(o)});var r=j(a,e),s=l(!0,{},p);if(s.snapshotId){var c=n.parse(t,!0);if(c.query.snapshot)throw new M("options.snapshotId","Duplicate snapshot supplied in both the source uri and option.");c.search=void 0,c.query.snapshot=s.snapshotId,t=n.format(c)}var d=x.put(r).withHeader(y.COPY_SOURCE,t);s.isIncrementalCopy&&d.withQueryOption(w.COMP,"incrementalcopy"),d.withHeader(y.ACCESS_TIER,s.blobTier),d.withHeader(y.LEASE_ID,s.leaseId),d.withHeader(y.SOURCE_LEASE_ID,s.sourceLeaseId),d.addOptionalMetadataHeaders(s.metadata);this.performRequest(d,null,s,function(t,i){t.blobResult=null,t.error||(t.blobResult=new C(a,e),t.blobResult.getPropertiesFromHeaders(t.response.headers),s.metadata&&(t.blobResult.metadata=s.metadata));i(t,function(t){o(t.error,t.blobResult,t.response)})})},H.prototype.abortCopyBlob=function(t,a,e,i,n){var o;u.normalizeArgs(i,n,function(t,a){o=t,n=a}),f.validateArgs("abortCopyBlob",function(e){e.string(t,"container"),e.string(a,"blob"),e.containerNameIsValid(t),e.callback(n)});var p=j(t,a),r=l(!0,{},o),s=x.put(p).withQueryOption(w.COPY_ID,e).withQueryOption(w.COMP,"copy").withHeader(y.COPY_ACTION,"abort");s.withHeader(y.LEASE_ID,r.leaseId);this.performRequest(s,null,r,function(t,a){a(t,function(t){n(t.error,t.response)})})},H.prototype.generateSharedAccessSignature=function(t,a,e,i){if(!this.storageCredentials)throw new D("storageCredentials");if(!this.storageCredentials.generateSignedQueryString)throw new M("storageCredentials",v.CANNOT_CREATE_SAS_WITHOUT_ACCOUNT_KEY);f.validateArgs("generateSharedAccessSignature",function(a){a.string(t,"container"),a.containerNameIsValid(t),a.object(e,"sharedAccessPolicy")});var n=h.ResourceTypes.CONTAINER;a&&(f.validateArgs("generateSharedAccessSignature",function(t){t.string(a,"blob")}),n=h.ResourceTypes.BLOB),e.AccessPolicy&&(u.objectIsNull(e.AccessPolicy.Start)||(p.isDate(e.AccessPolicy.Start)||(e.AccessPolicy.Start=new Date(e.AccessPolicy.Start)),e.AccessPolicy.Start=u.truncatedISO8061Date(e.AccessPolicy.Start)),u.objectIsNull(e.AccessPolicy.Expiry)||(p.isDate(e.AccessPolicy.Expiry)||(e.AccessPolicy.Expiry=new Date(e.AccessPolicy.Expiry)),e.AccessPolicy.Expiry=u.truncatedISO8061Date(e.AccessPolicy.Expiry)));var o=j(t,a,!0);return this.storageCredentials.generateSignedQueryString(b.ServiceType.Blob,o,e,null,{headers:i,resourceType:n})},H.prototype.getUrl=function(t,a,e,o,p){var l;f.validateArgs("getUrl",function(a){a.string(t,"container"),a.containerNameIsValid(t)}),l=u.objectIsNull(o)||!1!==o?this.host.primaryHost:this.host.secondaryHost,(l=u.trimPortFromUri(l))&&l.lastIndexOf("/")!==l.length-1&&(l+="/");var r=i.parse(e);p&&(r[w.SNAPSHOT]=p);var s=n.format({pathname:this._getPath(j(t,a)),query:r});return n.resolve(l,s)},H.prototype.createPageBlob=function(t,a,e,i,n){var o;if(u.normalizeArgs(i,n,function(t,a){o=t,n=a}),f.validateArgs("createPageBlob",function(i){i.string(t,"container"),i.string(a,"blob"),i.containerNameIsValid(t),i.value(e,"length"),i.callback(n)}),e&&e%h.PAGE_SIZE!=0)throw new RangeError(v.INVALID_PAGE_BLOB_LENGTH);var p=l(!0,{},o),r=j(t,a),s=x.put(r).withHeader(y.BLOB_TYPE,h.BlobTypes.PAGE).withHeader(y.BLOB_CONTENT_LENGTH,e).withHeader(y.CONTENT_LENGTH,0).withHeader(y.ACCESS_TIER,p.blobTier).withHeader(y.LEASE_ID,p.leaseId);C.setHeadersFromBlob(s,p);this.performRequest(s,null,p,function(t,a){a(t,function(t){n(t.error,t.response)})})},H.prototype.createPageBlobFromStream=function(t,a,e,i,n,o){return this._createBlobFromStream(t,a,h.BlobTypes.PAGE,e,i,n,o)},H.prototype.createWriteStreamToExistingPageBlob=function(t,a,e,i){return this._createWriteStreamToBlob(t,a,h.BlobTypes.PAGE,0,!1,e,i)},H.prototype.createWriteStreamToNewPageBlob=function(t,a,e,i,n){return this._createWriteStreamToBlob(t,a,h.BlobTypes.PAGE,e,!0,i,n)},H.prototype.createPagesFromStream=function(t,a,e,i,n,o,p){var r;u.normalizeArgs(o,p,function(t,a){r=t,p=a}),f.validateArgs("createPagesFromStream",function(e){e.string(t,"container"),e.string(a,"blob"),e.containerNameIsValid(t),e.callback(p)});var s=l(!0,{},r);if(n-i+1>h.MAX_UPDATE_PAGE_SIZE)throw new RangeError(v.INVALID_PAGE_RANGE_FOR_UPDATE);var c=this;u.objectIsNull(s.transactionalContentMD5)&&s.useTransactionalMD5?u.calculateMD5(e,h.MAX_UPDATE_PAGE_SIZE,s,function(e,o){s.transactionalContentMD5=o,c._createPages(t,a,e,null,i,n,s,p)}):c._createPages(t,a,null,e,i,n,s,p)},H.prototype.listPageRanges=function(t,a,e,i){var n;u.normalizeArgs(e,i,function(t,a){n=t,i=a}),f.validateArgs("listPageRanges",function(e){e.string(t,"container"),e.string(a,"blob"),e.containerNameIsValid(t),e.callback(i)});var o=l(!0,{},n),r=j(t,a),s=x.get(r).withQueryOption(w.COMP,"pagelist").withQueryOption(w.SNAPSHOT,o.snapshotId);if(o.rangeStart&&o.rangeStart%h.PAGE_SIZE!=0)throw new RangeError(v.INVALID_PAGE_START_OFFSET);if(o.rangeEnd&&(o.rangeEnd+1)%h.PAGE_SIZE!=0)throw new RangeError(v.INVALID_PAGE_END_OFFSET);C.setHeadersFromBlob(s,o),o.requestLocationMode=E.PRIMARY_OR_SECONDARY;this.performRequest(s,null,o,function(t,a){if(t.pageRanges=null,!t.error){t.pageRanges=[];var e=[];t.response.body.PageList.PageRange&&(e=t.response.body.PageList.PageRange,p.isArray(e)||(e=[e])),e.forEach(function(a){var e={start:parseInt(a.Start,10),end:parseInt(a.End,10)};t.pageRanges.push(e)})}a(t,function(t){i(t.error,t.pageRanges,t.response)})})},H.prototype.getPageRangesDiff=function(t,a,e,i,n){var o;u.normalizeArgs(i,n,function(t,a){o=t,n=a}),f.validateArgs("getPageRangesDiff",function(e){e.string(t,"container"),e.string(a,"blob"),e.containerNameIsValid(t),e.callback(n)});var r=l(!0,{},o),s=j(t,a),c=x.get(s).withQueryOption(w.COMP,"pagelist").withQueryOption(w.SNAPSHOT,r.snapshotId).withQueryOption(w.PREV_SNAPSHOT,e);if(r.rangeStart&&r.rangeStart%h.PAGE_SIZE!=0)throw new RangeError(v.INVALID_PAGE_START_OFFSET);if(r.rangeEnd&&(r.rangeEnd+1)%h.PAGE_SIZE!=0)throw new RangeError(v.INVALID_PAGE_END_OFFSET);if(r.rangeEnd&&(r.rangeEnd+1)%h.PAGE_SIZE!=0)throw new RangeError(v.INVALID_PAGE_END_OFFSET);C.setHeadersFromBlob(c,r),r.requestLocationMode=E.PRIMARY_OR_SECONDARY;this.performRequest(c,null,r,function(t,a){if(t.pageRangesDiff=null,!t.error){if(t.pageRangesDiff=[],t.response.body.PageList.PageRange){var e=t.response.body.PageList.PageRange;p.isArray(e)||(e=[e]),e.forEach(function(a){var e={start:parseInt(a.Start,10),end:parseInt(a.End,10),isCleared:!1};t.pageRangesDiff.push(e)})}if(t.response.body.PageList.ClearRange){var i=t.response.body.PageList.ClearRange;p.isArray(i)||(i=[i]),i.forEach(function(a){var e={start:parseInt(a.Start,10),end:parseInt(a.End,10),isCleared:!0};t.pageRangesDiff.push(e)})}}a(t,function(t){n(t.error,t.pageRangesDiff,t.response)})})},H.prototype.clearPageRange=function(t,a,e,i,n,o){var p;u.normalizeArgs(n,o,function(t,a){p=t,o=a}),f.validateArgs("clearPageRange",function(e){e.string(t,"container"),e.string(a,"blob"),e.containerNameIsValid(t),e.callback(o)});var r=l(!0,{},p),s=this._updatePageBlobPagesImpl(t,a,e,i,h.PageWriteOptions.CLEAR,r);this.performRequest(s,null,r,function(t,a){a(t,function(t){o(t.error,t.response)})})},H.prototype.resizePageBlob=function(t,a,e,i,n){var o;u.normalizeArgs(i,n,function(t,a){o=t,n=a}),f.validateArgs("resizePageBlob",function(e){e.string(t,"container"),e.string(a,"blob"),e.containerNameIsValid(t),e.callback(n)});var p=l(!0,{},o),r=j(t,a),s=x.put(r).withQueryOption(w.COMP,"properties").withHeader(y.LEASE_ID,p.leaseId);if(e&&e%h.PAGE_SIZE!=0)throw new RangeError(v.INVALID_PAGE_BLOB_LENGTH);s.withHeader(y.BLOB_CONTENT_LENGTH,e),this._setBlobPropertiesHelper({webResource:s,options:p,container:t,blob:a,callback:n})},H.prototype.setPageBlobSequenceNumber=function(t,a,e,i,n,p){var r;if(u.normalizeArgs(n,p,function(t,a){r=t,p=a}),f.validateArgs("setPageBlobSequenceNumber",function(e){e.string(t,"container"),e.string(a,"blob"),e.containerNameIsValid(t),e.callback(p)}),e===P.SequenceNumberAction.INCREMENT){if(!u.objectIsNull(i))throw new M("sequenceNumber",v.BLOB_INVALID_SEQUENCE_NUMBER)}else if(u.objectIsNull(i))throw new D("sequenceNumber",o.format(v.ARGUMENT_NULL_OR_EMPTY,"sequenceNumber"));var s=l(!0,{},r),c=j(t,a),d=x.put(c).withQueryOption(w.COMP,"properties").withHeader(y.SEQUENCE_NUMBER_ACTION,e);e!==P.SequenceNumberAction.INCREMENT&&d.withHeader(y.SEQUENCE_NUMBER,i);this.performRequest(d,null,s,function(e,i){e.blobResult=null,e.error||(e.blobResult=new C(t,a),e.blobResult.getPropertiesFromHeaders(e.response.headers));i(e,function(t){p(t.error,t.blobResult,t.response)})})},H.prototype.createBlockBlobFromStream=function(t,a,e,i,n,o){return this._createBlobFromStream(t,a,h.BlobTypes.BLOCK,e,i,n,o)},H.prototype.createBlockBlobFromText=function(t,a,e,i,n){return this._createBlobFromText(t,a,h.BlobTypes.BLOCK,e,i,n)},H.prototype.createWriteStreamToBlockBlob=function(t,a,e,i){return this._createWriteStreamToBlob(t,a,h.BlobTypes.BLOCK,0,!1,e,i)},H.prototype.createBlockFromStream=function(t,a,e,i,n,o,p){var r;u.normalizeArgs(o,p,function(t,a){r=t,p=a}),f.validateArgs("createBlockFromStream",function(t){t.string(a,"container"),t.string(e,"blob"),t.containerNameIsValid(a),t.exists(i,"readStream"),t.value(n,"streamLength"),t.callback(p)});var s=l(!0,{},r);if(n>h.MAX_BLOCK_BLOB_BLOCK_SIZE)throw new RangeError(v.INVALID_STREAM_LENGTH);this._createBlock(t,a,e,null,i,n,s,p)},H.prototype.createBlockFromText=function(t,a,i,n,o,p){var r;u.normalizeArgs(o,p,function(t,a){r=t,p=a}),f.validateArgs("createBlockFromText",function(t){t.string(a,"container"),t.string(i,"blob"),t.containerNameIsValid(a),t.callback(p)});var s=l(!0,{},r),c=e.isBuffer(n)?n.length:e.byteLength(n);if(c>h.MAX_BLOCK_BLOB_BLOCK_SIZE)throw new RangeError(v.INVALID_TEXT_LENGTH);this._createBlock(t,a,i,n,null,c,s,p)},H.prototype._createBlock=function(t,a,i,n,o,p,l,r){var s=j(a,i),c=this,d=function(){var a=x.put(s).withQueryOption(w.COMP,"block").withQueryOption(w.BLOCK_ID,new e(t).toString("base64")).withHeader(y.CONTENT_LENGTH,p);C.setHeadersFromBlob(a,l);var i=function(t,a){a(t,function(t){r(t.error,t.response)})};u.objectIsNull(n)?c.performRequestOutputStream(a,o,l,i):c.performRequest(a,n,l,i)};u.objectIsNull(l.transactionalContentMD5)&&l.useTransactionalMD5?u.objectIsNull(n)?u.calculateMD5(o,p,l,function(t,a){l.transactionalContentMD5=a,n=t,p=t.length,d()}):(l.transactionalContentMD5=u.getContentMd5(n),d()):d()},H.prototype.commitBlocks=function(t,a,i,n,o){var p;u.normalizeArgs(n,o,function(t,a){p=t,o=a}),f.validateArgs("commitBlocks",function(e){e.string(t,"container"),e.string(a,"blob"),e.object(i,"blockList"),e.containerNameIsValid(t),e.callback(o)});var r=R.serialize(i),s=j(t,a),c=l(!0,{},p),d=x.put(s).withQueryOption(w.COMP,"blocklist").withHeader(y.CONTENT_LENGTH,e.byteLength(r)).withBody(r);C.setPropertiesFromBlob(d,c);this.performRequest(d,d.body,c,function(e,n){e.blobResult=new C(t,a),e.blobResult.list=null,e.error||(e.blobResult.getPropertiesFromHeaders(e.response.headers),e.blobResult.list=i);n(e,function(t){o(t.error,t.blobResult,t.response)})})},H.prototype.listBlocks=function(t,a,e,i,n){var o;u.normalizeArgs(i,n,function(t,a){o=t,n=a}),f.validateArgs("listBlocks",function(e){e.string(t,"container"),e.string(a,"blob"),e.containerNameIsValid(t),e.callback(n)});var p=j(t,a),r=l(!0,{},o),s=x.get(p).withQueryOption(w.COMP,"blocklist").withQueryOption(w.BLOCK_LIST_TYPE,e).withQueryOption(w.SNAPSHOT,r.snapshotId);r.requestLocationMode=E.PRIMARY_OR_SECONDARY;this.performRequest(s,null,r,function(t,a){t.blockListResult=null,t.error||(t.blockListResult=R.parse(t.response.body.BlockList));a(t,function(t){n(t.error,t.blockListResult,t.response)})})},H.prototype.generateBlockIdPrefix=function(){var t=Math.floor(4294967296*Math.random()).toString(16);return u.zeroPaddingString(t,8)},H.prototype.getBlockId=function(t,a){return t+"-"+u.zeroPaddingString(a,6)},H.prototype.createOrReplaceAppendBlob=function(t,a,e,i){var n;u.normalizeArgs(e,i,function(t,a){n=t,i=a}),f.validateArgs("createOrReplaceAppendBlob",function(e){e.string(t,"container"),e.string(a,"blob"),e.containerNameIsValid(t),e.callback(i)});var o=l(!0,{},n),p=j(t,a),r=x.put(p).withHeader(y.BLOB_TYPE,h.BlobTypes.APPEND).withHeader(y.LEASE_ID,o.leaseId).withHeader(y.CONTENT_LENGTH,0);C.setHeadersFromBlob(r,o);this.performRequest(r,null,o,function(t,a){a(t,function(t){i(t.error,t.response)})})},H.prototype.createAppendBlobFromStream=function(t,a,e,i,n,o){return this._createBlobFromStream(t,a,h.BlobTypes.APPEND,e,i,n,o)},H.prototype.createAppendBlobFromText=function(t,a,e,i,n){return this._createBlobFromText(t,a,h.BlobTypes.APPEND,e,i,n)},H.prototype.createWriteStreamToNewAppendBlob=function(t,a,e,i){return this._createWriteStreamToBlob(t,a,h.BlobTypes.APPEND,0,!0,e,i)},H.prototype.createWriteStreamToExistingAppendBlob=function(t,a,e,i){return this._createWriteStreamToBlob(t,a,h.BlobTypes.APPEND,0,!1,e,i)},H.prototype.appendFromStream=function(t,a,e,i,n,o){var p;return u.normalizeArgs(n,o,function(t,a){p=t,o=a}),f.validateArgs("appendFromStream",function(n){n.string(t,"container"),n.string(a,"blob"),n.containerNameIsValid(t),n.exists(e,"stream"),n.value(i,"streamLength"),n.callback(o)}),this._uploadBlobFromStream(!1,t,a,h.BlobTypes.APPEND,e,i,p,o)},H.prototype.appendFromText=function(t,a,e,i,n){return this._uploadBlobFromText(!1,t,a,h.BlobTypes.APPEND,e,i,n)},H.prototype.appendBlockFromStream=function(t,a,e,i,n,o){var p;u.normalizeArgs(n,o,function(t,a){p=t,o=a}),f.validateArgs("appendBlockFromStream",function(n){n.string(t,"container"),n.string(a,"blob"),n.containerNameIsValid(t),n.exists(e,"readStream"),n.value(i,"streamLength"),n.callback(o)});var r=l(!0,{},p);if(i>h.MAX_APPEND_BLOB_BLOCK_SIZE)throw new RangeError(v.INVALID_STREAM_LENGTH);this._appendBlock(t,a,null,e,i,r,o)},H.prototype.appendBlockFromText=function(t,a,i,n,o){var p;u.normalizeArgs(n,o,function(t,a){p=t,o=a}),f.validateArgs("appendBlockFromText",function(e){e.string(t,"container"),e.string(a,"blob"),e.containerNameIsValid(t),e.callback(o)});var r=l(!0,{},p),s=e.isBuffer(i)?i.length:e.byteLength(i);if(s>h.MAX_APPEND_BLOB_BLOCK_SIZE)throw new RangeError(v.INVALID_TEXT_LENGTH);this._appendBlock(t,a,i,null,s,r,o)},H.prototype._createBlobFromStream=function(t,a,e,i,n,o,p){var r;u.normalizeArgs(o,p,function(t,a){r=t,p=a}),f.validateArgs("_createBlobFromStream",function(o){o.string(t,"container"),o.string(a,"blob"),o.containerNameIsValid(t),o.blobTypeIsValid(e),o.exists(i,"stream"),o.value(n,"streamLength"),o.callback(p)});var s=l(!0,{},r),c=this;return this._createBlob(t,a,e,n,s,function(o,l,r){o?p(o,l,r):c._uploadBlobFromStream(!0,t,a,e,i,n,s,p)}),s.speedSummary},H.prototype._createBlobFromText=function(t,a,i,n,o,p){var r;u.normalizeArgs(o,p,function(t,a){r=t,p=a}),f.validateArgs("_createBlobFromText",function(e){e.string(t,"container"),e.string(a,"blob"),e.containerNameIsValid(t),e.blobTypeIsValid(i),e.callback(p)});var s=l(!0,{},r),c=this,d=u.objectIsNull(n)?0:e.isBuffer(n)?n.length:e.byteLength(n);return this._createBlob(t,a,i,d,s,function(e,o,l){e?p(e,o,l):c._uploadBlobFromText(!0,t,a,i,n,s,p)}),s.speedSummary},H.prototype._createWriteStreamToBlob=function(t,a,e,i,n,o,p){var r;u.normalizeArgs(o,p,function(t,a){r=t,p=a}),f.validateArgs("_createWriteStreamToBlob",function(i){i.string(t,"container"),i.string(a,"blob"),i.containerNameIsValid(t),i.blobTypeIsValid(e)});var s,c=l(!0,{},r);e===h.BlobTypes.BLOCK?(c.storeBlobContentMD5=!1!==c.storeBlobContentMD5,s=c.blockSize||h.DEFAULT_WRITE_BLOCK_SIZE_IN_BYTES):e==h.BlobTypes.PAGE?s=h.DEFAULT_WRITE_PAGE_SIZE_IN_BYTES:e==h.BlobTypes.APPEND&&(s=h.DEFAULT_WRITE_BLOCK_SIZE_IN_BYTES);var d=new B({calcContentMd5:c.storeBlobContentMD5});d._highWaterMark=s,d.pause();var m=this,v=function(i,o,l){i?p&&p(i,o,l):m._uploadBlobFromStream(n,t,a,e,d,null,c,function(t,a,e){t&&d.emit("error",t),p&&p(t,a,e)})};return!0===n?this._createBlob(t,a,e,i,c,v):v(),d},H.prototype._uploadBlobFromStream=function(t,a,e,i,n,o,p,l){var r;u.normalizeArgs(p,l,function(t,a){r=t,l=a}),r.speedSummary=r.speedSummary||new k(e),i===h.BlobTypes.BLOCK&&(r.storeBlobContentMD5=!1!==r.storeBlobContentMD5),n.pause();var s=this,c=function(){if(null===o||o>=s.singleBlobPutThresholdInBytes||i!==h.BlobTypes.BLOCK){var t=new T(n,{calcContentMd5:r.storeBlobContentMD5});s._uploadContentFromChunkStream(a,e,i,t,o,r,l)}else o>0&&u.objectIsNull(u.tryGetValueChain(r,["contentSettings","contentMD5"],null))&&r.storeBlobContentMD5?(u.calculateMD5(n,Math.min(s.singleBlobPutThresholdInBytes,o),r,function(t,i){u.setObjectInnerPropertyValue(r,["contentSettings","contentMD5"],i),s._putBlockBlob(a,e,t,null,t.length,r,l)}),n.resume()):s._putBlockBlob(a,e,null,n,o,r,l)};if(t)c();else{if(r.storeBlobContentMD5&&i!==h.BlobTypes.BLOCK)throw new Error(v.MD5_NOT_POSSIBLE);i===h.BlobTypes.APPEND||r.accessConditions?this.getBlobProperties(a,e,r,function(t,a,e){!t||r.accessConditions&&"*"===r.accessConditions.EtagNonMatch&&400===e.statusCode?(i===h.BlobTypes.APPEND&&(r.appendPosition=a.contentLength),c()):l(t)}):c()}return r.speedSummary},H.prototype._uploadBlobFromText=function(t,a,i,n,o,p,r){var s;u.normalizeArgs(p,r,function(t,a){s=t,r=a}),s.speedSummary=s.speedSummary||new k(i),s[y.CONTENT_TYPE]=s.contentSettings&&s.contentSettings.contentType||'text/plain;charset="utf-8"';var c=this,d=function(){var t,p=u.objectIsNull(o)?0:e.isBuffer(o)?o.length:e.byteLength(o);if(n===h.BlobTypes.BLOCK){if(s.storeBlobContentMD5=!1!==s.storeBlobContentMD5,t=c._putBlockBlob,p>h.MAX_SINGLE_UPLOAD_BLOB_SIZE_IN_BYTES)throw new RangeError(v.INVALID_BLOB_LENGTH)}else if(n===h.BlobTypes.APPEND&&(t=c._appendBlock,p>h.MAX_APPEND_BLOB_BLOCK_SIZE))throw new RangeError(v.INVALID_TEXT_LENGTH);t.call(c,a,i,o,null,p,s,function(t,e,o){n!==h.BlobTypes.BLOCK?c.setBlobProperties(a,i,s.contentSettings,s,function(t,a,i){a=l(!1,a,e),r(t,a,i)}):r(t,e,o)})};if(t)!u.objectIsNull(o)&&u.objectIsNull(u.tryGetValueChain(s,["contentSettings","contentMD5"],null))&&s.storeBlobContentMD5&&u.setObjectInnerPropertyValue(s,["contentSettings","contentMD5"],u.getContentMd5(o)),d();else{if(s.storeBlobContentMD5&&n!==h.BlobTypes.BLOCK)throw new Error(v.MD5_NOT_POSSIBLE);(n===h.BlobTypes.APPEND||s.accessConditions)&&this.getBlobProperties(a,i,s,function(t,a){t?r(t):(n===h.BlobTypes.APPEND&&(s.appendPosition=a.contentLength),d())})}},H.prototype._putBlockBlob=function(t,a,e,i,n,o,p){o.speedSummary||(o.speedSummary=new k(a));var l=o.speedSummary;l.totalSize=n;var r=j(t,a),s=x.put(r).withHeader(y.CONTENT_TYPE,"application/octet-stream").withHeader(y.BLOB_TYPE,h.BlobTypes.BLOCK).withHeader(y.CONTENT_LENGTH,n);!u.objectIsNull(e)&&u.objectIsNull(o.transactionalContentMD5)&&o.useTransactionalMD5&&(o.transactionalContentMD5=u.getContentMd5(e)),C.setHeadersFromBlob(s,o);var c=function(e,i){e.blobResult=null,e.error||(e.blobResult=new C(t,a),e.blobResult.getPropertiesFromHeaders(e.response.headers),o.metadata&&(e.blobResult.metadata=o.metadata));i(e,function(t){t&&t.error||l.increment(n),p(t.error,t.blobResult,t.response)})};return u.objectIsNull(e)?this.performRequestOutputStream(s,i,o,c):this.performRequest(s,e,o,c),o.speedSummary},H.prototype._appendBlock=function(t,a,e,i,n,o,p){var l=o.speedSummary||new k(a);l.totalSize=n;var r=this,s=function(){var s=j(t,a),c=x.put(s).withQueryOption(w.COMP,"appendblock").withHeader(y.CONTENT_LENGTH,n).withHeader(y.BLOB_CONDITION_MAX_SIZE,o.maxBlobSize).withHeader(y.BLOB_CONDITION_APPEND_POSITION,o.appendPosition);C.setHeadersFromBlob(c,o);var d=function(e,i){e.blobResult=null,e.error||(e.blobResult=new C(t,a),e.blobResult.getPropertiesFromHeaders(e.response.headers));i(e,function(t){t&&t.error||l.increment(n),p(t.error,t.blobResult,t.response)})};u.objectIsNull(e)?r.performRequestOutputStream(c,i,o,d):r.performRequest(c,e,o,d)};return u.objectIsNull(o.transactionalContentMD5)&&o.useTransactionalMD5?u.objectIsNull(e)?u.calculateMD5(i,n,o,function(t,a){o.transactionalContentMD5=a,e=t,n=t.length,s()}):(o.transactionalContentMD5=u.getContentMd5(e),s()):s(),o.speedSummary},H.prototype._leaseImpl=function(t,a,e,i,n,o){var p;if(u.objectIsNull(a))p=x.put(t).withQueryOption(w.RESTYPE,"container");else{f.validateArgs("_leaseImpl",function(t){t.string(a,"blob")});var l=j(t,a);p=x.put(l)}p.withQueryOption(w.COMP,"lease").withHeader(y.LEASE_ID,e).withHeader(y.LEASE_ACTION,i.toLowerCase()).withHeader(y.LEASE_BREAK_PERIOD,n.leaseBreakPeriod).withHeader(y.PROPOSED_LEASE_ID,n.proposedLeaseId).withHeader(y.LEASE_DURATION,n.leaseDuration);this.performRequest(p,null,n,function(e,i){e.leaseResult=null,e.error||(e.leaseResult=new O(t,a),e.leaseResult.getPropertiesFromHeaders(e.response.headers));i(e,function(t){o(t.error,t.leaseResult,t.response)})})},H.prototype._createPages=function(t,a,e,i,n,o,p,l){var r=this._updatePageBlobPagesImpl(t,a,n,o,h.PageWriteOptions.UPDATE,p);!u.objectIsNull(e)&&u.objectIsNull(p.transactionalContentMD5)&&p.useTransactionalMD5&&r.withHeader(y.CONTENT_MD5,u.getContentMd5(e));var s=function(e,i){e.blobResult=null,e.error||(e.blobResult=new C(t,a),e.blobResult.getPropertiesFromHeaders(e.response.headers));i(e,function(t){l(t.error,t.blobResult,t.response)})};u.objectIsNull(e)?this.performRequestOutputStream(r,i,p,s):this.performRequest(r,e,p,s)},H.prototype._updatePageBlobPagesImpl=function(t,a,e,i,n,o){if(e&&e%h.PAGE_SIZE!=0)throw new RangeError(v.INVALID_PAGE_START_OFFSET);if(i&&(i+1)%h.PAGE_SIZE!=0)throw new RangeError(v.INVALID_PAGE_END_OFFSET);o||(o={}),o.rangeStart=e,o.rangeEnd=i,o.contentLength=n===h.PageWriteOptions.UPDATE?i-e+1:0;var p=j(t,a),l=x.put(p).withQueryOption(w.COMP,"page").withHeader(y.CONTENT_TYPE,"application/octet-stream").withHeader(y.PAGE_WRITE,n);return C.setHeadersFromBlob(l,o),l},H.prototype._uploadContentFromChunkStream=function(t,a,e,i,n,p,r){var s,c,d,m,f;this.logger.debug(o.format("_uploadContentFromChunkStream for blob %s",a));var g=u.tryGetValueChain(p,["contentSettings","contentMD5"],null),x=p.parallelOperationThreadCount||this.parallelOperationThreadCount;if(e==h.BlobTypes.BLOCK){s="createBlockFromText",c=!0;var b=Math.ceil(n/5e4);if(p.blockSize){if(p.blockSize<b){var y=new M("options.blockSize",o.format("The minimum blockSize is %s and the provided blockSize %s is too small.",b,p.blockSize));return void r(y)}f=p.blockSize}else f=Math.max(b,h.DEFAULT_WRITE_BLOCK_SIZE_IN_BYTES)}else if(e==h.BlobTypes.PAGE)s="_createPages",d=!0,f=h.DEFAULT_WRITE_PAGE_SIZE_IN_BYTES;else{if(e!=h.BlobTypes.APPEND){y=new M("blobType",o.format("Unknown blob type %s",e));return void r(y)}s="appendBlockFromText",m=!0,x=1,f=h.DEFAULT_WRITE_BLOCK_SIZE_IN_BYTES}i._highWaterMark=f,this._setOperationExpiryTime(p);var w=p.speedSummary||new k(a);w.totalSize=n;var E=new S(f,x,{logger:this.logger});if(i.setMemoryAllocator(E),i.setOutputLength(n),i._stream&&i._stream.setMemoryAllocator){var B=new S(i._stream._highWaterMark,x,{logger:this.logger});i._stream.setMemoryAllocator(B)}var T=new _(s,{callInOrder:m,callbackInOrder:m,logger:this.logger,enableReuseSocket:this.defaultEnableReuseSocket,operationMemoryUsage:f});T.setConcurrency(x);var I={leaseId:p.leaseId,timeoutIntervalInMs:p.timeoutIntervalInMs,clientRequestTimeoutInMs:p.clientRequestTimeoutInMs,operationExpiryTime:p.operationExpiryTime,maxBlobSize:p.maxBlobSize,appendPosition:p.appendPosition||0,initialAppendPosition:p.appendPosition||0,absorbConditionalErrorsOnRetry:p.absorbConditionalErrorsOnRetry},A=p.blockIdPrefix||this.generateBlockIdPrefix(),R=0,C=[],N={},O=this;return i.on("data",function(e,l){var r=null,g=!1,x=w.getAutoIncrementFunction(e.length);if(e.length>f)throw new RangeError(o.format(v.EXCEEDED_SIZE_LIMITATION,f,e.length));if(p.useTransactionalMD5){var b=u.getContentMd5(e);I.transactionalContentMD5=b}var h=function(){return!n||(l.start>=n?(O.logger.debug(o.format("Stop uploading data from %s bytes to %s bytes to blob %s because of limit %s",l.start,l.end,a,n)),i.stop(),!1):(l.end>=n&&(O.logger.debug(o.format("Clip uploading data from %s bytes to %s bytes to blob %s because of limit %s",l.start,l.end,a,n)),l.end=n-1,e=e.slice(0,n-l.start),p.useTransactionalMD5&&(I.transactionalContentMD5=u.getContentMd5(e))),!0))};c?function(){if(h()){var n=O.getBlockId(A,R);C.push(n),r=new _.RestOperation(O,s,n,t,a,e,I,function(t){t?(O.logger.debug(o.format("Stop uploading data as error happens. Error: %s",o.inspect(t))),i.stop()):x(),E.releaseBuffer(e),e=null}),R++}}():m?function(){if(h()){if(I.appendPosition=Number(I.initialAppendPosition)+Number(l.start),p.maxBlobSize&&I.appendPosition+e.length>p.maxBlobSize)throw new Error(v.MAX_BLOB_SIZE_CONDITION_NOT_MEET);r=new _.RestOperation(O,s,t,a,e,I,function(t,a){t?(O.logger.debug(o.format("Stop uploading data as error happens. Error: %s",o.inspect(t))),i.stop()):x(),N=a,E.releaseBuffer(e),e=null})}}():d&&h()&&(u.isBufferAllZero(e)?(O.logger.debug(o.format("Skip upload data from %s bytes to %s bytes to blob %s",l.start,l.end,a)),w.increment(e.length)):(O.logger.debug(o.format("Upload data from %s bytes to %s bytes to blob %s",l.start,l.end,a)),r=new _.RestOperation(O,s,t,a,e,null,l.start,l.end,I,function(t){t?(O.logger.debug(o.format("Stop uploading data as error happens. Error: %s",o.inspect(t))),i.stop()):x(),E.releaseBuffer(e),e=null}))),r&&(g=T.addOperation(r),r=null,g&&(O.logger.debug("File stream paused"),i.pause()))}),i.on("end",function(){O.logger.debug(o.format("File read stream ended for blob %s",a)),T.enableComplete()}),T.on("drain",function(){O.logger.debug("file stream resume"),i.resume()}),T.on("end",function(e){if(O.logger.debug("batch operations commited"),w=null,e)r(e);else{if(g)p.contentSettings.contentMD5=g;else if(p.storeBlobContentMD5){var n=i.getContentMd5("base64");u.setObjectInnerPropertyValue(p,["contentSettings","contentMD5"],n)}if(c){var s={UncommittedBlocks:C};O.commitBlocks(t,a,s,p,function(t,e,n){O.logger.debug(o.format("Blob %s committed",a)),t?(i.finish(),r(t)):(N.commmittedBlocks=C,i.finish(),r(t,N,n))})}else{var d=p.contentSettings;O.setBlobProperties(t,a,d,function(t,a,e){i.finish(),a=l(!1,a,N),r(t,a,e)})}}}),w},H.prototype._doesContainerExist=function(t,a,e,i){var n=x.head(t).withQueryOption(w.RESTYPE,"container").withHeader(y.LEASE_ID,e.leaseId);!1===a&&(e.requestLocationMode=E.PRIMARY_OR_SECONDARY);this.performRequest(n,null,e,function(a,e){a.containerResult=new N(t),a.error?a.error&&a.error.statusCode===b.HttpConstants.HttpResponseCodes.NotFound&&(a.error=null,a.containerResult.exists=!1,a.response.isSuccessful=!0):(a.containerResult.exists=!0,a.containerResult.getPropertiesFromHeaders(a.response.headers));e(a,function(t){i(t.error,t.containerResult,t.response)})})},H.prototype._doesBlobExist=function(t,a,e,i,n){var o=j(t,a),p=x.head(o).withQueryOption(w.SNAPSHOT,i.snapshotId).withHeader(y.LEASE_ID,i.leaseId);!1===e&&(i.requestLocationMode=E.PRIMARY_OR_SECONDARY);this.performRequest(p,null,i,function(e,i){e.blobResult=new C(t,a),e.error?e.error&&e.error.statusCode===b.HttpConstants.HttpResponseCodes.NotFound&&(e.error=null,e.blobResult.exists=!1,e.response.isSuccessful=!0):(e.blobResult.exists=!0,e.blobResult.getPropertiesFromHeaders(e.response.headers));i(e,function(t){n(t.error,t.blobResult,t.response)})})},H.prototype._setBlobPropertiesHelper=function(t){this.performRequest(t.webResource,null,t.options,function(a,e){a.blobResult=null,a.error||(a.blobResult=new C(t.container,t.blob),a.blobResult.getPropertiesFromHeaders(a.response.headers));e(a,function(a){t.callback(a.error,a.blobResult,a.response)})})},H.prototype._validateLengthAndMD5=function(t,a){var i,n=a.response.headers[b.HeaderConstants.CONTENT_MD5];u.objectIsNull(a.response.headers[b.HeaderConstants.CONTENT_LENGTH])||(i=parseInt(a.response.headers[b.HeaderConstants.CONTENT_LENGTH],10)),u.objectIsNull(t.disableContentMD5Validation)&&(t.disableContentMD5Validation=!1),!1===t.disableContentMD5Validation&&!0===t.useTransactionalMD5&&u.objectIsNull(n)&&(a.error=new z(v.MD5_NOT_PRESENT_ERROR),a.retryable=!1),u.objectIsNull(a.length)&&("string"==typeof a.response.body?a.length=e.byteLength(a.response.body):e.isBuffer(a.response.body)&&(a.length=a.response.body.length)),u.objectIsNull(i)||a.length===i||(a.error=new Error(v.CONTENT_LENGTH_MISMATCH),a.retryable=!1),!1===t.disableContentMD5Validation&&u.objectIsNull(a.contentMD5)&&(a.contentMD5=u.getContentMd5(a.response.body)),!1!==t.disableContentMD5Validation||u.objectIsNull(n)||n===a.contentMD5||(a.error=new Error(o.format(v.HASH_MISMATCH,n,a.contentMD5)),a.retryable=!1)},H.prototype._setRangeContentMD5Header=function(t,a){if(!u.objectIsNull(a.rangeStart)&&a.useTransactionalMD5){if(u.objectIsNull(a.rangeEnd))throw new D("options.rangeEndHeader",o.format(v.ARGUMENT_NULL_OR_EMPTY,a.rangeEndHeader));if(parseInt(a.rangeEnd,10)-parseInt(a.rangeStart,10)+1>h.MAX_RANGE_GET_SIZE_WITH_MD5)throw new M("options",v.INVALID_RANGE_FOR_MD5);t.withHeader(y.RANGE_GET_CONTENT_MD5,"true")}},H.prototype._getBlobToRangeStream=function(t,a,e,i,n,p){var l;u.normalizeArgs(n,p,function(t,a){l=t,p=a}),f.validateArgs("_getBlobToRangeStream",function(i){i.string(t,"container"),i.string(a,"blob"),i.containerNameIsValid(t),i.blobNameIsValid(t,a),i.blobTypeIsValid(e),i.callback(p)});var r=null,v=!0;e==h.BlobTypes.PAGE?r=new d(this,t,a,l):e==h.BlobTypes.APPEND?(r=new m(this,t,a,l),v=!1):e==h.BlobTypes.BLOCK&&(r=new s(this,t,a,l),v=!1),l.speedSummary||(l.speedSummary=new k(a));var g=l.speedSummary,x=l.parallelOperationThreadCount||this.parallelOperationThreadCount,b=new _("getBlobInRanges",{callbackInOrder:!0,logger:this.logger,enableReuseSocket:this.defaultEnableReuseSocket});b.setConcurrency(x);var y=this,w=null;!l.disableContentMD5Validation&&(w=(new c).createMd5Hash());var E=null,S=null;r.on("range",function(e){g.totalSize||(g.totalSize=r.rangeSize);var n={rangeStart:e.start,rangeEnd:e.end,responseEncoding:null},p=e.size;if(n.timeoutIntervalInMs=l.timeoutIntervalInMs,n.clientRequestTimeoutInMs=l.clientRequestTimeoutInMs,n.useTransactionalMD5=l.useTransactionalMD5,n.snapshotId=l.snapshotId,0!==e.dataSize){if(!(e.start>e.end)){var s=new _.RestOperation(y,"getBlobToText",t,a,n,function(t,a,e,n){if(t)y.logger.debug(o.format("Stop downloading data as error happens. Error: %s",o.inspect(t))),r.stop();else{p!==a.length&&y.logger.warn(o.format("Request %s bytes, but server returns %s bytes",p,a.length)),E||(E=e),S||(S=n);var l=g.getAutoIncrementFunction(a.length);i.write(a,l)||(y.logger.debug("Write stream is full and pause batch operation"),b.pause()),w&&w.update(a),a=null}});b.addOperation(s)&&(y.logger.debug("Pause range stream"),r.pause())}}else if(v){var c=g.getAutoIncrementFunction(p),d=new _.CommonOperation(_.noOperation,function(t){if(!t){var a=u.writeZerosToStream(i,p,w,c);y.logger.debug(o.format("Write %s bytes Zero from %s to %s",p,e.start,e.end)),a||(y.logger.debug("Write stream is full and pause batch operation"),b.pause())}});b.addOperation(d)}else y.logger.debug(o.format("Can not read %s bytes to %s bytes of blob %s",e.start,e.end,a))}),r.on("end",function(){y.logger.debug("Range stream has ended."),b.enableComplete()}),b.on("drain",function(){y.logger.debug("Resume range stream"),r.resume()}),i.on("drain",function(){y.logger.debug("Resume batch operations"),b.resume()}),b.on("end",function(t){y.logger.debug("Download completed!"),t?p(t):i.end(function(){y.logger.debug("Write stream has ended"),E||(E={}),u.setObjectInnerPropertyValue(E,["contentSettings","contentMD5"],u.tryGetValueChain(l,["contentSettings","contentMD5"],null)),E.clientSideContentMD5=null,w&&(E.clientSideContentMD5=w.digest("base64")),p(t,E,S)})});var B={timeoutIntervalInMs:l.timeoutIntervalInMs,clientRequestTimeoutInMs:l.clientRequestTimeoutInMs,snapshotId:l.snapshotId,leaseId:l.leaseId,blockListFilter:P.BlockListFilter.COMMITTED};return r.list(B,function(t){p(t)}),g},H.prototype._getBlobToStream=function(t,a,e,i,n){var o;u.normalizeArgs(i,n,function(t,a){o=t,n=a});var p=j(t,a),r=x.get(p).withRawResponse(),s=l(!0,{},o);r.withQueryOption(w.SNAPSHOT,s.snapshotId),C.setHeadersFromBlob(r,s),this._setRangeContentMD5Header(r,s);var c=this;this.performRequestInputStream(r,null,e,s,function(e,i){e.blobResult=null,e.error||(e.blobResult=new C(t,a),e.blobResult.metadata=c.parseMetadataHeaders(e.response.headers),e.blobResult.getPropertiesFromHeaders(e.response.headers),c._validateLengthAndMD5(s,e));i(e,function(t){n(t.error,t.blobResult,t.response)})})},H.prototype._listBlobsOrDircotriesSegmentedWithPrefix=function(t,a,e,i,n,o){var r;u.normalizeArgs(n,o,function(t,a){r=t,o=a}),f.validateArgs("listBlobsSegmented",function(a){a.string(t,"container"),a.containerNameIsValid(t),a.callback(o)});var s=l(!0,{},r),c=x.get(t).withQueryOption(w.RESTYPE,"container").withQueryOption(w.COMP,"list").withQueryOption(w.MAX_RESULTS,s.maxResults).withQueryOptions(s,w.DELIMITER,w.INCLUDE);u.objectIsNull(e)||c.withQueryOption(w.MARKER,e.nextMarker),c.withQueryOption(w.PREFIX,a),s.requestLocationMode=u.getNextListingLocationMode(e);this.performRequest(c,null,s,function(t,a){if(t.listBlobsResult=null,!t.error){t.listBlobsResult={entries:null,continuationToken:null},t.listBlobsResult.entries=[];var e=[];i==h.ListBlobTypes.Directory&&t.response.body.EnumerationResults.Blobs.BlobPrefix?(e=t.response.body.EnumerationResults.Blobs.BlobPrefix,p.isArray(e)||(e=[e])):i==h.ListBlobTypes.Blob&&t.response.body.EnumerationResults.Blobs.Blob&&(e=t.response.body.EnumerationResults.Blobs.Blob,p.isArray(e)||(e=[e])),e.forEach(function(a){var e=C.parse(a);t.listBlobsResult.entries.push(e)}),t.response.body.EnumerationResults.NextMarker&&(t.listBlobsResult.continuationToken={nextMarker:null,targetLocation:null},t.listBlobsResult.continuationToken.nextMarker=t.response.body.EnumerationResults.NextMarker,t.listBlobsResult.continuationToken.targetLocation=t.targetLocation)}a(t,function(t){o(t.error,t.listBlobsResult,t.response)})})},H.prototype._createBlob=function(t,a,e,i,n,o){e==h.BlobTypes.APPEND?this.createOrReplaceAppendBlob(t,a,n,function(t,a){o(t,null,a)}):e==h.BlobTypes.PAGE?this.createPageBlob(t,a,i,n,function(t){o(t)}):e==h.BlobTypes.BLOCK&&o()},H.SpeedSummary=k,a.exports=H}).call(this,t("buffer").Buffer)},{"../../common/errors/errors":8,"./../../common/common.core":6,"./../../common/md5-wrapper":13,"./../../common/streams/rangestream":30,"./blobutilities":43,"./internal/blockrangestream":44,"./internal/pagerangestream":45,"./models/blobresult":46,"./models/blocklistresult":47,"./models/containerresult":48,"./models/leaseresult":49,buffer:"buffer",extend:158,querystring:208,underscore:249,url:250,util:"util"}],49:[function(t,a,e){var i=t("./../../../common/common.core").Constants.HeaderConstants;function n(t,a,e,i){t&&(this.container=t),a&&(this.blob=a),e&&(this.id=e),i&&(this.time=i)}n.prototype.getPropertiesFromHeaders=function(t){var a=this;!a.id&&t[i.LEASE_ID]&&(a.id=t[i.LEASE_ID]),!a.time&&t[i.LEASE_TIME]&&(a.time=parseInt(t[i.LEASE_TIME],10)),a.etag=t[i.ETAG],a.lastModified=t[i.LAST_MODIFIED.toLowerCase()]},a.exports=n},{"./../../../common/common.core":6}],48:[function(t,a,e){var i=t("./../../../common/common.core"),n=i.util,o=i.Constants.HeaderConstants,p=t("../blobutilities");function l(t,a){t&&(this.name=t),a&&(this.publicAccessLevel=a)}l.parse=function(t){var a=new l;for(var e in t)if(t.hasOwnProperty(e))if("Properties"===e)n.setPropertyValueFromXML(a,t[e],!0);else if("Metadata"===e){var i=n.normalizePropertyNameFromXML(e);a[i]={},n.setPropertyValueFromXML(a[i],t[e],!1)}else a[e.toLowerCase()]=t[e];return a.publicAccessLevel||(a.publicAccessLevel=p.BlobContainerPublicAccessType.OFF),a},l.prototype.getPropertiesFromHeaders=function(t){var a=this,e=function(e,i){!n.tryGetValueChain(a,e.split("."),null)&&t[i.toLowerCase()]&&n.setObjectInnerPropertyValue(a,e.split("."),t[i.toLowerCase()])};e("etag",o.ETAG),e("lastModified",o.LAST_MODIFIED),e("lease.status",o.LEASE_STATUS),e("lease.state",o.LEASE_STATE),e("lease.duration",o.LEASE_DURATION),e("requestId",o.REQUEST_ID),a.publicAccessLevel||(a.publicAccessLevel=p.BlobContainerPublicAccessType.OFF,t[o.BLOB_PUBLIC_ACCESS]&&(a.publicAccessLevel=t[o.BLOB_PUBLIC_ACCESS])),"true"===a.publicAccessLevel&&(a.publicAccessLevel=p.BlobContainerPublicAccessType.CONTAINER)},a.exports=l},{"../blobutilities":43,"./../../../common/common.core":6}],47:[function(t,a,e){(function(a){var i=t("underscore"),n=t("./../../../common/common.core"),o=n.xmlbuilder,p=n.Constants;e.serialize=function(t){var e=o.create();return e=e.begin(p.BlobConstants.BLOCK_LIST_ELEMENT,{version:"1.0",encoding:"utf-8"}),i.isArray(t.LatestBlocks)&&t.LatestBlocks.forEach(function(t){e=e.ele(p.BlobConstants.LATEST_ELEMENT).txt(new a(t).toString("base64")).up()}),i.isArray(t.CommittedBlocks)&&t.CommittedBlocks.forEach(function(t){e=e.ele(p.BlobConstants.COMMITTED_ELEMENT).txt(new a(t).toString("base64")).up()}),i.isArray(t.UncommittedBlocks)&&t.UncommittedBlocks.forEach(function(t){e=e.ele(p.BlobConstants.UNCOMMITTED_ELEMENT).txt(new a(t).toString("base64")).up()}),e.doc().toString()},e.parse=function(t){var e={};return t.CommittedBlocks&&t.CommittedBlocks.Block&&(e.CommittedBlocks=t.CommittedBlocks.Block,i.isArray(e.CommittedBlocks)||(e.CommittedBlocks=[e.CommittedBlocks]),e.CommittedBlocks.forEach(function(t){t.Name=new a(t.Name,"base64").toString()})),t.UncommittedBlocks&&t.UncommittedBlocks.Block&&(e.UncommittedBlocks=t.UncommittedBlocks.Block,i.isArray(e.UncommittedBlocks)||(e.UncommittedBlocks=[e.UncommittedBlocks]),e.UncommittedBlocks.forEach(function(t){t.Name=new a(t.Name,"base64").toString()})),e}}).call(this,t("buffer").Buffer)},{"./../../../common/common.core":6,buffer:"buffer",underscore:249}],46:[function(t,a,e){var i=t("underscore"),n=t("./../../../common/common.core"),o=n.util,p=n.Constants.HeaderConstants;function l(t,a){t&&(this.container=t),a&&(this.name=a)}l.parse=function(t){var a=new l;for(var e in t)if(t.hasOwnProperty(e))if("Properties"===e)o.setPropertyValueFromXML(a,t[e],!0);else if("Metadata"===e){var i=o.normalizePropertyNameFromXML(e);a[i]={},o.setPropertyValueFromXML(a[i],t[e],!1)}else a[e.toLowerCase()]=t[e];return void 0!==a.isIncrementalCopy&&(a.isIncrementalCopy="true"===a.isIncrementalCopy),void 0!==a.accessTierInferred&&(a.accessTierInferred="true"===a.accessTierInferred),void 0!==a.deleted&&(a.deleted="true"==a.deleted),void 0!==a.remainingRetentionDays&&(a.remainingRetentionDays=parseInt(a.remainingRetentionDays)),a};var r={lastModified:"LAST_MODIFIED",etag:"ETAG",sequenceNumber:"SEQUENCE_NUMBER",blobType:"BLOB_TYPE",contentLength:"CONTENT_LENGTH",blobContentLength:"BLOB_CONTENT_LENGTH",contentRange:"CONTENT_RANGE",committedBlockCount:"BLOB_COMMITTED_BLOCK_COUNT",serverEncrypted:"SERVER_ENCRYPTED",requestId:"REQUEST_ID",range:"RANGE",blobRange:"STORAGE_RANGE",getContentMd5:"RANGE_GET_CONTENT_MD5",acceptRanges:"ACCEPT_RANGES",appendOffset:"BLOB_APPEND_OFFSET",accessTier:"ACCESS_TIER",accessTierChangeTime:"ACCESS_TIER_CHANGE_TIME",accessTierInferred:"ACCESS_TIER_INFERRED",archiveStatus:"ARCHIVE_STATUS",isIncrementalCopy:"INCREMENTAL_COPY","contentSettings.contentType":"CONTENT_TYPE","contentSettings.contentEncoding":"CONTENT_ENCODING","contentSettings.contentLanguage":"CONTENT_LANGUAGE","contentSettings.cacheControl":"CACHE_CONTROL","contentSettings.contentDisposition":"CONTENT_DISPOSITION","contentSettings.contentMD5":"CONTENT_MD5","lease.id":"LEASE_ID","lease.status":"LEASE_STATUS","lease.duration":"LEASE_DURATION","lease.state":"LEASE_STATE","copy.id":"COPY_ID","copy.status":"COPY_STATUS","copy.source":"COPY_SOURCE","copy.progress":"COPY_PROGRESS","copy.completionTime":"COPY_COMPLETION_TIME","copy.statusDescription":"COPY_STATUS_DESCRIPTION","copy.destinationSnapshot":"COPY_DESTINATION_SNAPSHOT"};l.prototype.getPropertiesFromHeaders=function(t){var a=this,e=function(e,i){if(!o.tryGetValueChain(a,e.split("."),null)&&t[i.toLowerCase()]&&(o.setObjectInnerPropertyValue(a,e.split("."),t[i.toLowerCase()]),"copy.progress"===e)){var n=o.parseCopyProgress(a.copy.progress);a.copy.bytesCopied=parseInt(n.bytesCopied),a.copy.totalBytes=parseInt(n.totalBytes)}};e("contentSettings.contentMD5",p.BLOB_CONTENT_MD5),i.chain(r).pairs().each(function(t){var a=t[0],i=p[t[1]];e(a,i)}),void 0!==a.isIncrementalCopy&&(a.isIncrementalCopy="true"===a.isIncrementalCopy),void 0!==a.accessTierInferred&&(a.accessTierInferred="true"==a.accessTierInferred)},l.setHeadersFromBlob=function(t,a){var e=function(e,i){var n=o.tryGetValueChain(a,i.split("."),null);n&&t.withHeader(e,n)};if(a){if(e(p.BLOB_CONTENT_TYPE,"contentSettings.contentType"),e(p.BLOB_CONTENT_ENCODING,"contentSettings.contentEncoding"),e(p.BLOB_CONTENT_LANGUAGE,"contentSettings.contentLanguage"),e(p.BLOB_CONTENT_DISPOSITION,"contentSettings.contentDisposition"),e(p.BLOB_CACHE_CONTROL,"contentSettings.cacheControl"),e(p.BLOB_CONTENT_MD5,"contentSettings.contentMD5"),e(p.CONTENT_LENGTH,"contentLength"),e(p.CONTENT_MD5,"transactionalContentMD5"),!o.objectIsNull(a.rangeStart)){var i="bytes="+a.rangeStart+"-";o.objectIsNull(a.rangeEnd)||(i+=a.rangeEnd),t.withHeader(p.RANGE,i)}e(p.BLOB_TYPE,"blobType"),e(p.LEASE_ID,"leaseId"),e(p.SEQUENCE_NUMBER,"sequenceNumber"),e(p.SEQUENCE_NUMBER_ACTION,"sequenceNumberAction"),a.metadata&&t.addOptionalMetadataHeaders(a.metadata)}},l.setPropertiesFromBlob=function(t,a){var e=function(e,i){var n=o.tryGetValueChain(a,i.split("."),null);n&&t.withHeader(e,n)};a&&(e(p.BLOB_CONTENT_TYPE,"contentSettings.contentType"),e(p.BLOB_CONTENT_ENCODING,"contentSettings.contentEncoding"),e(p.BLOB_CONTENT_LANGUAGE,"contentSettings.contentLanguage"),e(p.BLOB_CONTENT_DISPOSITION,"contentSettings.contentDisposition"),e(p.BLOB_CACHE_CONTROL,"contentSettings.cacheControl"),e(p.BLOB_CONTENT_MD5,"contentSettings.contentMD5"),e(p.LEASE_ID,"leaseId"),a.metadata&&t.addOptionalMetadataHeaders(a.metadata))},a.exports=l},{"./../../../common/common.core":6,underscore:249}],45:[function(t,a,e){var i=t("util"),n=t("./../../../common/streams/rangestream"),o=t("./../../../common/util/constants");function p(t,a,e,i){p.super_.call(this,t,a,e,i),i.minRangeSize?this._minRangeSize=i.minRangeSize:this._minRangeSize=o.BlobConstants.MIN_WRITE_PAGE_SIZE_IN_BYTES,i.maxRangeSize?this._maxRangeSize=i.maxRangeSize:this._maxRangeSize=o.BlobConstants.DEFAULT_WRITE_PAGE_SIZE_IN_BYTES,this._lengthHeader=o.HeaderConstants.BLOB_CONTENT_LENGTH,this._listFunc=t.listPageRanges}i.inherits(p,n),a.exports=p},{"./../../../common/streams/rangestream":30,"./../../../common/util/constants":33,util:"util"}],44:[function(t,a,e){var i=t("./../../../common/util/constants"),n=t("events").EventEmitter,o=t("./../blobutilities");function p(t,a,e,i){this.blobServiceClient=t,this.container=a,this.blob=e,this._emitter=new n,this._paused=!1,this._emittedAll=!1,this._emittedRangeType=null,this._emittedRangeIndex=null,this._offset=0,this._rangelist=[],this._isEmitting=!1,i.rangeStart?this._startOffset=i.rangeStart:this._startOffset=0,i.rangeEnd?this._endOffset=i.rangeEnd:this._endOffset=Number.MAX_VALUE}p.prototype.on=function(t,a){this._emitter.on(t,a)},p.prototype.list=function(t,a){t||(t={}),t.blockListFilter||(t.blockListFilter=o.BlockListFilter.ALL);var e=this;this.blobServiceClient.listBlocks(this.container,this.blob,t.blockListFilter,t,function(t,n,o){if(t)a(t);else{var p=parseInt(o.headers[i.HeaderConstants.BLOB_CONTENT_LENGTH],10);if(!n.CommittedBlocks){n.CommittedBlocks=[{Name:"NODESDK_BLOCKBLOB_RANGESTREAM",Size:p}]}e._rangelist=n,e._emitBlockList(),e=n=null}})},p.prototype._emitBlockList=function(){if(!(this._paused||this._emittedAll||this._isEmitting)){var t=this;this._getTypeList(function(){t._rangelist=null,t._emittedAll=!0,t._emitter.emit("end")})}},p.prototype._getTypeList=function(t){this._isEmitting=!0;try{var a=!1;if(this._rangelist)for(var e in this._rangelist)if(this._rangelist.hasOwnProperty(e)){if(null===this._emittedRangeType||a||this._emittedRangeType==e)this._emittedRangeType=e,a=!0;else if(this._emittedRangeType!==e)continue;if(this._paused)return;this._emitBlockRange(e,t)}}finally{this._isEmitting=!1}},p.prototype._emitBlockRange=function(t,a){for(var e=this._rangelist[t],i=!1,n=0;n<e.length;n++){if(null===this._emittedRangeIndex||i||this._emittedRangeIndex===n)this._emittedRangeIndex=n,i=!0;else if(this._emittedRangeIndex!==n)continue;if(this._paused)return;var o=e[n];if(o.name=o.Name,o.type=t,o.start=this._offset,this._offset+=parseInt(o.Size,10),o.end=this._offset-1,delete o.Name,delete o.Size,o.start>this._endOffset)break;o.end<this._startOffset||(o.start=Math.max(o.start,this._startOffset),o.end=Math.min(o.end,this._endOffset),o.size=o.end-o.start+1,o.dataSize=o.size,this._emitter.emit("range",o))}this._rangelist[t]=null,a()},p.prototype.pause=function(){this._paused=!0},p.prototype.resume=function(){this._paused=!1,this._isEmitting||this._emitBlockList()},p.prototype.stop=function(){this.pause(),this._emittedAll=!0,this._emitter.emit("end")},a.exports=p},{"./../../../common/util/constants":33,"./../blobutilities":43,events:156}]},{},[1]);
